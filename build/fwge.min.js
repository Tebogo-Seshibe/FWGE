(function(){function L(){var a=!1,b=void 0,c;Object.defineProperties(this,{GameObject:{value:n},Animation:{value:I},Input:{value:new M},Time:{value:new N},Transform:{value:u},Light:{value:new O},Maths:{value:new P},ParticleSystem:{value:J},Camera:{get:function(){return c}},Init:{value:function(){c=new Q}},Run:{value:function(){b=window.requestAnimationFrame(FWGE.Game.Run);a&&(FWGE.Game.GameUpdate(),FWGE.Physics.PhysicsUpdate(),FWGE.Render.RenderUpdate())}},GameUpdate:{value:function(){FWGE.Game.Time.TimeUpdate();
FWGE.Game.Camera.CameraUpdate();for(var a=q.length;0<=--a;)q[a].ObjectUpdate();FWGE.Game.Input.InputUpdate()}},Start:{value:function(){a||(a=!0);b||this.Run()}},Stop:{value:function(){a&&(a=!1);b&&(window.cancelAnimationFrame(b),b=void 0)}}})}function w(a){a||(a={});a.type||(a.type="");a.type=(a.type+"ITEM").trim().split(/\s+/);var b=a.name||"Item";Object.defineProperties(this,{Type:{value:a.type},Name:{get:function(){return b},set:function(a){"string"===typeof a&&(b=a)}}})}function v(a){a||(a={});
a.type||(a.type="");a.type+="GAMEITEM ";w.call(this,a);var b=a.gameobject;Object.defineProperties(this,{GameObject:{get:function(){return b},set:function(a){if(a instanceof n||void 0===a)b=a}}})}function n(a){a||(a={});a.type||(a.type="");a.type="GAMEOBJECT ";v.call(this,a);var b,c,e,g,f,k,p,l,y;Object.defineProperties(this,{ID:{value:"[go-"+R.next()+"]"},Transform:{value:a.transform instanceof u?a.transform:new u},Children:{value:[]},AddChild:{value:function(a){if(a instanceof n){this.Children.push(a);
var b=q.indexOf(a);-1!==b&&q.slice(b,1)}return a}},RemoveChild:{value:function(a){if(a instanceof n){var b=this.Children.indexOf(a);-1!==b&&(this.Children.slice(b,1),q.push(a))}return a}},RenderMaterial:{get:function(){return b},set:function(a){if(a instanceof A||void 0===a)b=a}},Mesh:{get:function(){return c},set:function(a){if(a instanceof D||void 0===a)c=a}},LightItem:{get:function(){return f},set:function(a){a&&"LIGHTITEM"===a.Type[1]?(f=a,f.GameObject=this):void 0===a&&(f&&(f.GameObject=void 0),
f=void 0)}},PhysicsItem:{get:function(){return e},set:function(a){a&&"PHYSICSITEM"===a.Type[0]?(e=a,e.GameObject=this):void 0===a&&(e&&(e.GameObject=void 0),e=void 0)}},Animation:{get:function(){return g},set:function(a){a&&"ANIMATION"===a.Type[0]?(g=a,g.GameObject=this):void 0===a&&(g&&(g.GameObject=void 0),g=void 0)}},ParticleSystem:{get:function(){return k},set:function(a){a&&"PARTICLESYSTEM"===a.Type[0]?(k=a,k.GameObject=this):void 0===a&&(k&&(k.GameObject=void 0),k=void 0)}},Begin:{get:function(){return p},
set:function(a){"function"===typeof a&&(p=a)}},Update:{get:function(){return l},set:function(a){"function"===typeof a&&(l=a)}},End:{get:function(){return y},set:function(a){"function"===typeof a&&(y=a)}}});this.RenderMaterial=a.material instanceof A?a.material:void 0;this.Mesh=a.mesh instanceof D?a.mesh:void 0;this.PhysicsItem=a.physicsitem instanceof B?a.physicsitem:void 0;this.Animation=a.animation instanceof I?a.animation:void 0;this.LightItem=a.lightitem instanceof C?a.lightitem:void 0;this.ParticleSystem=
a.particlesystem instanceof J?a.particlesystem:void 0;this.Begin="function"===typeof a.begin?a.begin:function(){};this.Update="function"===typeof a.update?a.update:function(){};this.End="function"===typeof a.end?a.end:function(){};this.Begin();q.push(this)}function Q(){var a=0,b=35,d=16/9,e=.1,g=900,f=-10,k=10,p=10,l=10,y=90,K=90;Object.defineProperties(this,{PERSPECTIVE:{value:0},ORTHOGRAPHIC:{value:1},Transform:{value:new u},Mode:{get:function(){return a},set:function(b){if(b===this.PERSPECTIVE||
b===this.ORTHOGRAPHIC)a=b,m.ProjectionUpdate()}},FOV:{get:function(){return b},set:function(a){"number"===typeof a&&(b=a,m.ProjectionUpdate())}},Aspect:{get:function(){return d},set:function(a){"number"===typeof a&&(d=a,m.ProjectionUpdate())}},Near:{get:function(){return e},set:function(a){"number"===typeof a&&(e=a,m.ProjectionUpdate())}},Far:{get:function(){return g},set:function(a){"number"===typeof a&&(g=a,m.ProjectionUpdate())}},Left:{get:function(){return f},set:function(a){"number"===typeof a&&
(f=a,m.ProjectionUpdate())}},Right:{get:function(){return k},set:function(a){"number"===typeof a&&(k=a,m.ProjectionUpdate())}},Top:{get:function(){return p},set:function(a){"number"===typeof a&&(p=a,m.ProjectionUpdate())}},Bottom:{get:function(){return l},set:function(a){"number"===typeof a&&(l=a,m.ProjectionUpdate())}},Theta:{get:function(){return y},set:function(a){"number"===typeof a&&(y=a,m.ProjectionUpdate())}},Phi:{get:function(){return K},set:function(a){"number"===typeof a&&(K=a,m.ProjectionUpdate())}},
CameraUpdate:{value:function(){c.canvas.height=window.innerHeight;c.canvas.width=window.innerWidth}}})}function I(a){a||(a={});a.type||(a.type="");a.type="ANIMATION ";v.call(this,a)}function N(){var a=void 0,b=void 0;Object.defineProperties(this,{Delta:{get:function(){return(a-b)/60}},DeltaTime:{get:function(){return a-b}},Now:{get:function(){return new Date(Date.now())}},TimeUpdate:{value:function(){void 0===a&&void 0===b?a=b=Date.now():(b=a,a=Date.now())}}})}function u(a){function b(a,b){a&&a instanceof
Array||(a=b?[1,1,1]:[0,0,0]);switch(a.length){case 0:a[0]=0;case 1:a[1]=0;case 2:a[2]=0}return FWGE.Game.Maths.Vector3.Create(a)}a||(a={});a.type||(a.type="");a.type="TRANSFORM ";v.call(this,a);var c=b(a.position),e=b(a.rotation),g=b(a.scale,!0),f=b(a.shear),k=FWGE.Game.Maths.Vector3.Create(0,1,0),p=FWGE.Game.Maths.Vector3.Create(0,0,1),l=FWGE.Game.Maths.Vector3.Create(1,0,0);Object.defineProperties(this,{Position:{get:function(){return c},set:function(a){"VECTOR3"===a.Type[0]&&FWGE.Game.Maths.Vector3.Set(c,
a)}},Rotation:{get:function(){return e},set:function(a){"VECTOR3"===a.Type[0]&&FWGE.Game.Maths.Vector3.Set(e,a)}},Scale:{get:function(){return g},set:function(a){"VECTOR3"===a.Type[0]&&FWGE.Game.Maths.Vector3.Set(g,a)}},Shear:{get:function(){return f},set:function(a){"VECTOR3"===a.Type[0]&&FWGE.Game.Maths.Vector3.Set(f,a)}},Up:{get:function(){return k}},Forward:{get:function(){return p}},Right:{get:function(){return l}}});this.TransformUpdate()}function M(){function a(a){var b=a.which||a.keyCode||
0;a.preventDefault();a.stopPropagation();a.cancelBubble=!0;return b}for(var b=Array(384),c=0;128>c;++c)b[c]=!0;for(c=128;384>c;++c)b[c]=!1;window.onkeyup=function(c){c=a(c);b[c+0]=!0;b[c+128]=!1;b[c+256]=!1};window.onkeydown=function(c){c=a(c);b[c+0]=!1;b[c+128]=!0;b[c+256]=!0};document.body.oncontextmenu=function(b){a(b);return!1};window.onmouseenter=function(b){a(b)};window.onmousemove=function(b){a(b)};window.onmouseleave=function(b){a(b)};window.onmousedown=function(b){a(b)};window.onmouseup=
function(b){a(b)};Object.defineProperties(this,{KEY_F1_UP:{get:function(){return b[112]}},KEY_F1_PRESS:{get:function(){return b[240]}},KEY_F1_DOWN:{get:function(){return b[368]}},KEY_F2_UP:{get:function(){return b[113]}},KEY_F2_PRESS:{get:function(){return b[241]}},KEY_F2_DOWN:{get:function(){return b[369]}},KEY_F3_UP:{get:function(){return b[114]}},KEY_F3_PRESS:{get:function(){return b[242]}},KEY_F3_DOWN:{get:function(){return b[370]}},KEY_F4_UP:{get:function(){return b[115]}},KEY_F4_PRESS:{get:function(){return b[243]}},
KEY_F4_DOWN:{get:function(){return b[371]}},KEY_F5_UP:{get:function(){return b[116]}},KEY_F5_PRESS:{get:function(){return b[244]}},KEY_F5_DOWN:{get:function(){return b[372]}},KEY_F6_UP:{get:function(){return b[117]}},KEY_F6_PRESS:{get:function(){return b[245]}},KEY_F6_DOWN:{get:function(){return b[373]}},KEY_F7_UP:{get:function(){return b[118]}},KEY_F7_PRESS:{get:function(){return b[246]}},KEY_F7_DOWN:{get:function(){return b[374]}},KEY_F8_UP:{get:function(){return b[119]}},KEY_F8_PRESS:{get:function(){return b[247]}},
KEY_F8_DOWN:{get:function(){return b[375]}},KEY_F9_UP:{get:function(){return b[120]}},KEY_F9_PRESS:{get:function(){return b[248]}},KEY_F9_DOWN:{get:function(){return b[376]}},KEY_F10_UP:{get:function(){return b[121]}},KEY_F10_PRESS:{get:function(){return b[249]}},KEY_F10_DOWN:{get:function(){return b[377]}},KEY_F11_UP:{get:function(){return b[122]}},KEY_F11_PRESS:{get:function(){return b[250]}},KEY_F11_DOWN:{get:function(){return b[378]}},KEY_F12_UP:{get:function(){return b[123]}},KEY_F12_PRESS:{get:function(){return b[251]}},
KEY_F12_DOWN:{get:function(){return b[379]}},KEY_0_UP:{get:function(){return b[48]}},KEY_0_PRESS:{get:function(){return b[176]}},KEY_0_DOWN:{get:function(){return b[304]}},KEY_1_UP:{get:function(){return b[49]}},KEY_1_PRESS:{get:function(){return b[177]}},KEY_1_DOWN:{get:function(){return b[305]}},KEY_2_UP:{get:function(){return b[50]}},KEY_2_PRESS:{get:function(){return b[178]}},KEY_2_DOWN:{get:function(){return b[306]}},KEY_3_UP:{get:function(){return b[51]}},KEY_3_PRESS:{get:function(){return b[179]}},
KEY_3_DOWN:{get:function(){return b[307]}},KEY_4_UP:{get:function(){return b[52]}},KEY_4_PRESS:{get:function(){return b[180]}},KEY_4_DOWN:{get:function(){return b[308]}},KEY_5_UP:{get:function(){return b[53]}},KEY_5_PRESS:{get:function(){return b[181]}},KEY_5_DOWN:{get:function(){return b[309]}},KEY_6_UP:{get:function(){return b[54]}},KEY_6_PRESS:{get:function(){return b[182]}},KEY_6_DOWN:{get:function(){return b[310]}},KEY_7_UP:{get:function(){return b[55]}},KEY_7_PRESS:{get:function(){return b[183]}},
KEY_7_DOWN:{get:function(){return b[311]}},KEY_8_UP:{get:function(){return b[56]}},KEY_8_PRESS:{get:function(){return b[184]}},KEY_8_DOWN:{get:function(){return b[312]}},KEY_9_UP:{get:function(){return b[57]}},KEY_9_PRESS:{get:function(){return b[185]}},KEY_9_DOWN:{get:function(){return b[313]}},NUMPAD_0_UP:{get:function(){return b[96]}},NUMPAD_0_PRESS:{get:function(){return b[224]}},NUMPAD_0_DOWN:{get:function(){return b[352]}},NUMPAD_1_UP:{get:function(){return b[97]}},NUMPAD_1_PRESS:{get:function(){return b[225]}},
NUMPAD_1_DOWN:{get:function(){return b[353]}},NUMPAD_2_UP:{get:function(){return b[98]}},NUMPAD_2_PRESS:{get:function(){return b[226]}},NUMPAD_2_DOWN:{get:function(){return b[354]}},NUMPAD_3_UP:{get:function(){return b[99]}},NUMPAD_3_PRESS:{get:function(){return b[227]}},NUMPAD_3_DOWN:{get:function(){return b[355]}},NUMPAD_4_UP:{get:function(){return b[100]}},NUMPAD_4_PRESS:{get:function(){return b[228]}},NUMPAD_4_DOWN:{get:function(){return b[356]}},NUMPAD_5_UP:{get:function(){return b[101]}},NUMPAD_5_PRESS:{get:function(){return b[229]}},
NUMPAD_5_DOWN:{get:function(){return b[357]}},NUMPAD_6_UP:{get:function(){return b[102]}},NUMPAD_6_PRESS:{get:function(){return b[230]}},NUMPAD_6_DOWN:{get:function(){return b[358]}},NUMPAD_7_UP:{get:function(){return b[103]}},NUMPAD_7_PRESS:{get:function(){return b[231]}},NUMPAD_7_DOWN:{get:function(){return b[359]}},NUMPAD_8_UP:{get:function(){return b[104]}},NUMPAD_8_PRESS:{get:function(){return b[232]}},NUMPAD_8_DOWN:{get:function(){return b[360]}},NUMPAD_9_UP:{get:function(){return b[105]}},
NUMPAD_9_PRESS:{get:function(){return b[233]}},NUMPAD_9_DOWN:{get:function(){return b[361]}},KEY_DIVIDE_UP:{get:function(){return b[111]}},KEY_DIVIDE_PRESS:{get:function(){return b[239]}},KEY_DIVIDE_DOWN:{get:function(){return b[367]}},KEY_MULTIPLY_UP:{get:function(){return b[106]}},KEY_MULTIPLY_PRESS:{get:function(){return b[234]}},KEY_MULTIPLY_DOWN:{get:function(){return b[362]}},KEY_SUBTRACT_UP:{get:function(){return b[109]}},KEY_SUBTRACT_PRESS:{get:function(){return b[237]}},KEY_SUBTRACT_DOWN:{get:function(){return b[365]}},
KEY_ADD_UP:{get:function(){return b[107]}},KEY_ADD_PRESS:{get:function(){return b[235]}},KEY_ADD_DOWN:{get:function(){return b[363]}},KEY_TAB_UP:{get:function(){return b[9]}},KEY_TAB_PRESS:{get:function(){return b[137]}},KEY_TAB_DOWN:{get:function(){return b[265]}},KEY_CAPS_UP:{get:function(){return b[20]}},KEY_CAPS_PRESS:{get:function(){return b[148]}},KEY_CAPS_DOWN:{get:function(){return b[276]}},KEY_SHIFT_UP:{get:function(){return b[16]}},KEY_SHIFT_PRESS:{get:function(){return b[144]}},KEY_SHIFT_DOWN:{get:function(){return b[272]}},
KEY_CTRL_UP:{get:function(){return b[17]}},KEY_CTRL_PRESS:{get:function(){return b[145]}},KEY_CTRL_DOWN:{get:function(){return b[273]}},KEY_ALT_UP:{get:function(){return b[18]}},KEY_ALT_PRESS:{get:function(){return b[146]}},KEY_ALT_DOWN:{get:function(){return b[274]}},KEY_BACKSPACE_UP:{get:function(){return b[8]}},KEY_BACKSPACE_PRESS:{get:function(){return b[136]}},KEY_BACKSPACE_DOWN:{get:function(){return b[264]}},KEY_ENTER_UP:{get:function(){return b[13]}},KEY_ENTER_PRESS:{get:function(){return b[141]}},
KEY_ENTER_DOWN:{get:function(){return b[269]}},KEY_UP_UP:{get:function(){return b[38]}},KEY_UP_PRESS:{get:function(){return b[166]}},KEY_UP_DOWN:{get:function(){return b[294]}},KEY_LEFT_UP:{get:function(){return b[37]}},KEY_LEFT_PRESS:{get:function(){return b[165]}},KEY_LEFT_DOWN:{get:function(){return b[293]}},KEY_RIGHT_UP:{get:function(){return b[40]}},KEY_RIGHT_PRESS:{get:function(){return b[168]}},KEY_RIGHT_DOWN:{get:function(){return b[296]}},KEY_DOWN_UP:{get:function(){return b[39]}},KEY_DOWN_PRESS:{get:function(){return b[167]}},
KEY_DOWN_DOWN:{get:function(){return b[295]}},KEY_BRACKET_L_UP:{get:function(){return b[219]}},KEY_BRACKET_L_PRESS:{get:function(){return b[347]}},KEY_BRACKET_L_DOWN:{get:function(){return b[475]}},KEY_BRACKET_R_UP:{get:function(){return b[221]}},KEY_BRACKET_R_PRESS:{get:function(){return b[349]}},KEY_BRACKET_R_DOWN:{get:function(){return b[477]}},KEY_COLON_UP:{get:function(){return b[186]}},KEY_COLON_PRESS:{get:function(){return b[314]}},KEY_COLON_DOWN:{get:function(){return b[442]}},KEY_QUOTE_UP:{get:function(){return b[222]}},
KEY_QUOTE_PRESS:{get:function(){return b[350]}},KEY_QUOTE_DOWN:{get:function(){return b[478]}},KEY_COMMA_UP:{get:function(){return b[188]}},KEY_COMMA_PRESS:{get:function(){return b[316]}},KEY_COMMA_DOWN:{get:function(){return b[444]}},KEY_PERIOD_UP:{get:function(){return b[190]}},KEY_PERIOD_PRESS:{get:function(){return b[318]}},KEY_PERIOD_DOWN:{get:function(){return b[446]}},KEY_SLASH_F_UP:{get:function(){return b[191]}},KEY_SLASH_F_PRESS:{get:function(){return b[319]}},KEY_SLASH_F_DOWN:{get:function(){return b[447]}},
KEY_SLASH_B_UP:{get:function(){return b[220]}},KEY_SLASH_B_PRESS:{get:function(){return b[348]}},KEY_SLASH_B_DOWN:{get:function(){return b[476]}},KEY_A_UP:{get:function(){return b[65]}},KEY_A_PRESS:{get:function(){return b[193]}},KEY_A_DOWN:{get:function(){return b[321]}},KEY_B_UP:{get:function(){return b[66]}},KEY_B_PRESS:{get:function(){return b[194]}},KEY_B_DOWN:{get:function(){return b[322]}},KEY_C_UP:{get:function(){return b[67]}},KEY_C_PRESS:{get:function(){return b[195]}},KEY_C_DOWN:{get:function(){return b[323]}},
KEY_D_UP:{get:function(){return b[68]}},KEY_D_PRESS:{get:function(){return b[196]}},KEY_D_DOWN:{get:function(){return b[324]}},KEY_E_UP:{get:function(){return b[69]}},KEY_E_PRESS:{get:function(){return b[197]}},KEY_E_DOWN:{get:function(){return b[325]}},KEY_F_UP:{get:function(){return b[70]}},KEY_F_PRESS:{get:function(){return b[198]}},KEY_F_DOWN:{get:function(){return b[326]}},KEY_G_UP:{get:function(){return b[71]}},KEY_G_PRESS:{get:function(){return b[199]}},KEY_G_DOWN:{get:function(){return b[327]}},
KEY_H_UP:{get:function(){return b[72]}},KEY_H_PRESS:{get:function(){return b[200]}},KEY_H_DOWN:{get:function(){return b[328]}},KEY_I_UP:{get:function(){return b[73]}},KEY_I_PRESS:{get:function(){return b[201]}},KEY_I_DOWN:{get:function(){return b[329]}},KEY_J_UP:{get:function(){return b[74]}},KEY_J_PRESS:{get:function(){return b[202]}},KEY_J_DOWN:{get:function(){return b[330]}},KEY_K_UP:{get:function(){return b[75]}},KEY_K_PRESS:{get:function(){return b[203]}},KEY_K_DOWN:{get:function(){return b[331]}},
KEY_L_UP:{get:function(){return b[76]}},KEY_L_PRESS:{get:function(){return b[204]}},KEY_L_DOWN:{get:function(){return b[332]}},KEY_M_UP:{get:function(){return b[77]}},KEY_M_PRESS:{get:function(){return b[205]}},KEY_M_DOWN:{get:function(){return b[333]}},KEY_N_UP:{get:function(){return b[78]}},KEY_N_PRESS:{get:function(){return b[206]}},KEY_N_DOWN:{get:function(){return b[334]}},KEY_O_UP:{get:function(){return b[79]}},KEY_O_PRESS:{get:function(){return b[207]}},KEY_O_DOWN:{get:function(){return b[335]}},
KEY_P_UP:{get:function(){return b[80]}},KEY_P_PRESS:{get:function(){return b[208]}},KEY_P_DOWN:{get:function(){return b[336]}},KEY_Q_UP:{get:function(){return b[81]}},KEY_Q_PRESS:{get:function(){return b[209]}},KEY_Q_DOWN:{get:function(){return b[337]}},KEY_R_UP:{get:function(){return b[82]}},KEY_R_PRESS:{get:function(){return b[210]}},KEY_R_DOWN:{get:function(){return b[338]}},KEY_S_UP:{get:function(){return b[83]}},KEY_S_PRESS:{get:function(){return b[211]}},KEY_S_DOWN:{get:function(){return b[339]}},
KEY_T_UP:{get:function(){return b[84]}},KEY_T_PRESS:{get:function(){return b[212]}},KEY_T_DOWN:{get:function(){return b[340]}},KEY_U_UP:{get:function(){return b[85]}},KEY_U_PRESS:{get:function(){return b[213]}},KEY_U_DOWN:{get:function(){return b[341]}},KEY_V_UP:{get:function(){return b[86]}},KEY_V_PRESS:{get:function(){return b[214]}},KEY_V_DOWN:{get:function(){return b[342]}},KEY_W_UP:{get:function(){return b[87]}},KEY_W_PRESS:{get:function(){return b[215]}},KEY_W_DOWN:{get:function(){return b[343]}},
KEY_X_UP:{get:function(){return b[88]}},KEY_X_PRESS:{get:function(){return b[216]}},KEY_X_DOWN:{get:function(){return b[344]}},KEY_Y_UP:{get:function(){return b[89]}},KEY_Y_PRESS:{get:function(){return b[217]}},KEY_Y_DOWN:{get:function(){return b[345]}},KEY_Z_UP:{get:function(){return b[90]}},KEY_Z_PRESS:{get:function(){return b[218]}},KEY_Z_DOWN:{get:function(){return b[346]}},InputUpdate:{value:function(){for(var a=128;256>a;++a)b[a]&&(b[a]=!1)}}})}function O(){var a=0,b=0,c=0;Object.defineProperties(this,
{Ambient:{value:function(b){if(1>a)return h[0]=new S(b),h[0].GameObject=b.parent instanceof n?b.parent:new FWGE.Game.GameObject,h[0].GameObject.LightItem=h[0],a++,h[0]}},Directional:{value:function(a){if(3>b)for(var c=1;4>c;++c)if(void 0===h[c])return h[c]=new T(a),h[c].GameObject=a.parent instanceof n?a.parent:new FWGE.Game.GameObject,h[c].GameObject.LightItem=h[c],b++,h[c]}},Point:{value:function(a){if(3>c)for(var b=4;12>b;++b)if(void 0===h[b])return h[b]=new U(a),h[b].GameObject=a.parent instanceof
n?a.parent:new FWGE.Game.GameObject,h[b].GameObject.LightItem=h[b],c++,h[b]}},Remove:{value:function(d){if(d)switch(d.Type[0]){case "AMBIENTLIGHT":h[0]=void 0;--a;break;case "DIRECTIONALLIGHT":for(var e=1;4>e;++e)if(h[e]===d){h[e]=void 0;--b;break}break;case "POINTLIGHT":for(e=4;12>e;++e)if(h[e]===d){h[e]=void 0;--c;break}}}}})}function C(a){a||(a={});a.type||(a.type="");a.type+="LIGHTITEM ";v.call(this,a);var b=FWGE.Render.Colour.Create(a.colour instanceof Float32Array?a.colour:new Float32Array(3)),
c="number"===typeof a.intensity?a.intensity:1;Object.defineProperties(this,{Colour:{get:function(){return b},set:function(a){a instanceof Float32Array&&3===a.length&&FWGE.Game.Maths.Vector3.Set(b,a)}},Intensity:{get:function(){return c},set:function(a){"number"===typeof a&&(c=Math.clamp(a,0,1))}}})}function S(a){a||(a={});a.type||(a.type="");a.type+="AMBIENTLIGHT ";C.call(this,a)}function T(a){a||(a={});a.type||(a.type="");a.type+="DIRECTIONALLIGHT ";C.call(this,a);var b=a.direction instanceof Float32Array&&
3===a.direction.length?a.direction:new Float32Array(3);Object.defineProperties(this,{Direction:{get:function(){return b},set:function(a){a instanceof Float32Array&&3===a.length&&FWGE.Game.Maths.Vector3.Set(b,a)}},DirectionalUpdate:{value:function(){}}})}function U(a){a||(a={});a.type||(a.type="");a.type="POINTLIGHT ";C.call(this,a);var b="number"===typeof a.radius?a.radius:5,c="number"===typeof a.angle?a.angle:180;Object.defineProperties(this,{Radius:{get:function(){return b},set:function(a){"number"===
typeof a&&(b=a)}},Angle:{get:function(){return c},set:function(a){"number"===typeof a&&(c=Math.clamp(a,0,180))}}})}function P(){Object.defineProperties(this,{Matrix2:{value:new V},Matrix3:{value:new W},Matrix4:{value:new X},Vector2:{value:new Y},Vector3:{value:new Z},Vector4:{value:new aa},Quaternion:{value:new ba}})}function V(){Object.defineProperties(this,{Create:{value:function(a,b,c,e){var d=new Float32Array(4);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]=
"number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;d[3]="number"===typeof e?e:a instanceof Array&&"number"===typeof a[3]?a[3]:0;Object.defineProperties(d,{Type:{value:"MATRIX2"},M11:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},M12:{get:function(){return d[1]},set:function(a){"number"===typeof a&&(d[1]=a)}},M21:{get:function(){return d[2]},set:function(a){"number"===typeof a&&
(d[2]=a)}},M22:{get:function(){return d[3]},set:function(a){"number"===typeof a&&(d[3]=a)}}});return d}},Set:{value:function(a,b,c,e,g){var d;b instanceof Float32Array&&4===a.length?(d=b[0],c=b[1],e=b[2],b=b[3]):(d=b,b=g);if(a instanceof Float32Array&&4===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof e&&"number"===typeof b)return a[0]=d,a[1]=c,a[2]=e,a[3]=b,a}},Transpose:{value:function(a){if(a instanceof Float32Array&&4===a.length)return this.Set(a,a[0],a[2],a[1],a[3])}},
Identity:{value:function(a){return a instanceof Float32Array&&4===a.length?this.Set(a,1,0,0,1):this.Create(1,0,0,1)}},Determinant:{value:function(a){if(a instanceof Float32Array&&4===a.length)return a[0]*a[3]-a[2]*a[1]}},Inverse:{value:function(a){if(a instanceof Float32Array&&4===a.length){var b=this.Determinant(a);return 0!==b?this.Set(a,a[3]/b,-a[1]/b,-a[2]/b,a[0]/b):a}}},Sum:{value:function(a,b){if(a instanceof Float32Array&&4===a.length&&b instanceof Float32Array&&4===b.length)return this.Set(a,
a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&4===a.length){if(b instanceof Float32Array&&4===b.length)return this.Set(a,a[0]*b[0]+a[1]*b[2],a[0]*b[1]+a[1]*b[3],a[2]*b[0]+a[3]*b[2],a[2]*b[1]+a[3]*b[3]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b)}}},RevMult:{value:function(a,b){if(a instanceof Float32Array&&4===a.length&&b instanceof Float32Array&&4===b.length)return this.Set(a,b[0]*a[0]+b[1]*a[2],b[0]*a[1]+b[1]*a[3],b[2]*
a[0]+b[3]*a[2],b[2]*a[1]+b[3]*a[3])}}})}function W(){Object.defineProperties(this,{Create:{value:function(a,b,c,e,g,f,k,p,l){var d=new Float32Array(9);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;d[3]="number"===typeof e?e:a instanceof Array&&"number"===typeof a[3]?a[3]:0;d[4]="number"===typeof g?g:a instanceof Array&&
"number"===typeof a[4]?a[4]:0;d[5]="number"===typeof f?f:a instanceof Array&&"number"===typeof a[5]?a[5]:0;d[6]="number"===typeof k?k:a instanceof Array&&"number"===typeof a[6]?a[6]:0;d[7]="number"===typeof p?p:a instanceof Array&&"number"===typeof a[7]?a[7]:0;d[8]="number"===typeof l?l:a instanceof Array&&"number"===typeof a[8]?a[8]:0;Object.defineProperties(d,{Type:{value:"MATRIX3"},M11:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},M12:{get:function(){return d[1]},
set:function(a){"number"===typeof a&&(d[1]=a)}},M13:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=a)}},M21:{get:function(){return d[3]},set:function(a){"number"===typeof a&&(d[3]=a)}},M22:{get:function(){return d[4]},set:function(a){"number"===typeof a&&(d[4]=a)}},M23:{get:function(){return d[5]},set:function(a){"number"===typeof a&&(d[5]=a)}},M31:{get:function(){return d[6]},set:function(a){"number"===typeof a&&(d[6]=a)}},M32:{get:function(){return d[7]},set:function(a){"number"===
typeof a&&(d[7]=a)}},M33:{get:function(){return d[8]},set:function(a){"number"===typeof a&&(d[8]=a)}}});return d}},Set:{value:function(a,b,c,e,g,f,k,p,l,h){var d;b instanceof Float32Array&&9===a.length?(d=b[0],c=b[1],e=b[2],g=b[3],f=b[4],k=b[5],p=b[6],l=b[7],b=b[8]):(d=b,b=h);if(a instanceof Float32Array&&9===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof e&&"number"===typeof g&&"number"===typeof f&&"number"===typeof k&&"number"===typeof p&&"number"===typeof l&&"number"===typeof b)return a[0]=
d,a[1]=c,a[2]=e,a[3]=g,a[4]=f,a[5]=k,a[6]=p,a[7]=l,a[8]=b,a}},Transpose:{value:function(a){if(a instanceof Float32Array&&9===a.length)return this.Set(a,a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}},Identity:{value:function(a){return a instanceof Float32Array&&9===a.length?this.Set(a,1,0,0,0,1,0,0,0,1):this.Create(1,0,0,0,1,0,0,0,1)}},Determinant:{value:function(a){if(a instanceof Float32Array&&9===a.length)return a[0]*(a[4]*a[8]-a[5]*a[7])-a[1]*(a[3]*a[8]-a[5]*a[6])+a[2]*(a[3]*a[7]-a[4]*a[6])}},
Inverse:{value:function(a){if(a instanceof Float32Array&&9===a.length){var b=this.Determinant(a);return 0!==b?this.Set(a,(a[4]*a[8]-a[7]*a[5])/b,-(a[1]*a[8]-a[7]*a[2])/b,(a[1]*a[5]-a[4]*a[2])/b,-(a[3]*a[8]-a[6]*a[5])/b,(a[0]*a[8]-a[6]*a[2])/b,-(a[0]*a[5]-a[3]*a[2])/b,(a[3]*a[7]-a[6]*a[4])/b,-(a[0]*a[7]-a[6]*a[1])/b,(a[0]*a[4]-a[3]*a[1])/b):a}}},Sum:{value:function(a,b){if(a instanceof Float32Array&&9===a.length&&b instanceof Float32Array&&9===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2],
a[3]+b[3],a[4]+b[4],a[5]+b[5],a[6]+b[6],a[7]+b[7],a[8]+b[8])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&9===a.length){if(b instanceof Float32Array&&9===b.length)return this.Set(a,a[0]*b[0]+a[1]*b[3]+a[2]*b[6],a[0]*b[1]+a[1]*b[4]+a[2]*b[7],a[0]*b[2]+a[1]*b[5]+a[2]*b[8],a[3]*b[0]+a[4]*b[3]+a[5]*b[6],a[3]*b[1]+a[4]*b[4]+a[5]*b[7],a[3]*b[2]+a[4]*b[5]+a[5]*b[8],a[6]*b[0]+a[7]*b[3]+a[8]*b[6],a[6]*b[1]+a[7]*b[4]+a[8]*b[7],a[6]*b[2]+a[7]*b[5]+a[8]*b[8]);if("number"===typeof b)return this.Set(a,
a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*b,a[5]*b,a[6]*b,a[7]*b,a[8]*b)}}},RevMult:{value:function(a,b){if(a instanceof Float32Array&&9===a.length&&b instanceof Float32Array&&9===b.length)return this.Set(b,a[0]*b[0]+a[1]*b[3]+a[2]*b[6],a[0]*b[1]+a[1]*b[4]+a[2]*b[7],a[0]*b[2]+a[1]*b[5]+a[2]*b[8],a[3]*b[0]+a[4]*b[3]+a[5]*b[6],a[3]*b[1]+a[4]*b[4]+a[5]*b[7],a[3]*b[2]+a[4]*b[5]+a[5]*b[8],a[6]*b[0]+a[7]*b[3]+a[8]*b[6],a[6]*b[1]+a[7]*b[4]+a[8]*b[7],a[6]*b[2]+a[7]*b[5]+a[8]*b[8])}}})}function X(){Object.defineProperties(this,
{Create:{value:function(a,b,c,e,g,f,k,p,l,h,m,x,n,q,r,t){var d=new Float32Array(16);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;d[3]="number"===typeof e?e:a instanceof Array&&"number"===typeof a[3]?a[3]:0;d[4]="number"===typeof g?g:a instanceof Array&&"number"===typeof a[4]?a[4]:0;d[5]="number"===typeof f?f:a instanceof
Array&&"number"===typeof a[5]?a[5]:0;d[6]="number"===typeof k?k:a instanceof Array&&"number"===typeof a[6]?a[6]:0;d[7]="number"===typeof p?p:a instanceof Array&&"number"===typeof a[7]?a[7]:0;d[8]="number"===typeof l?l:a instanceof Array&&"number"===typeof a[8]?a[8]:0;d[9]="number"===typeof h?h:a instanceof Array&&"number"===typeof a[9]?a[9]:0;d[10]="number"===typeof m?m:a instanceof Array&&"number"===typeof a[10]?a[10]:0;d[11]="number"===typeof x?x:a instanceof Array&&"number"===typeof a[11]?a[11]:
0;d[12]="number"===typeof n?n:a instanceof Array&&"number"===typeof a[12]?a[12]:0;d[13]="number"===typeof q?q:a instanceof Array&&"number"===typeof a[13]?a[13]:0;d[14]="number"===typeof r?r:a instanceof Array&&"number"===typeof a[14]?a[14]:0;d[15]="number"===typeof t?t:a instanceof Array&&"number"===typeof a[15]?a[15]:0;Object.defineProperties(d,{Type:{value:"MATRIX4"},M11:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},M12:{get:function(){return d[1]},set:function(a){"number"===
typeof a&&(d[1]=a)}},M13:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=a)}},M14:{get:function(){return d[3]},set:function(a){"number"===typeof a&&(d[3]=a)}},M21:{get:function(){return d[4]},set:function(a){"number"===typeof a&&(d[4]=a)}},M22:{get:function(){return d[5]},set:function(a){"number"===typeof a&&(d[5]=a)}},M23:{get:function(){return d[6]},set:function(a){"number"===typeof a&&(d[6]=a)}},M24:{get:function(){return d[7]},set:function(a){"number"===typeof a&&(d[7]=
a)}},M31:{get:function(){return d[8]},set:function(a){"number"===typeof a&&(d[8]=a)}},M32:{get:function(){return d[9]},set:function(a){"number"===typeof a&&(d[9]=a)}},M33:{get:function(){return d[10]},set:function(a){"number"===typeof a&&(d[10]=a)}},M34:{get:function(){return d[11]},set:function(a){"number"===typeof a&&(d[11]=a)}},M41:{get:function(){return d[12]},set:function(a){"number"===typeof a&&(d[12]=a)}},M42:{get:function(){return d[13]},set:function(a){"number"===typeof a&&(d[13]=a)}},M43:{get:function(){return d[14]},
set:function(a){"number"===typeof a&&(d[14]=a)}},M44:{get:function(){return d[15]},set:function(a){"number"===typeof a&&(d[15]=a)}}});return d}},Set:{value:function(a,b,c,e,g,f,k,p,l,h,m,x,n,q,r,t,u){var d;b instanceof Float32Array&&16===a.length?(d=b[0],c=b[1],e=b[2],g=b[3],f=b[4],k=b[5],p=b[6],l=b[7],h=b[8],m=b[9],x=b[10],n=b[11],q=b[12],r=b[13],t=b[14],b=b[15]):(d=b,b=u);if(a instanceof Float32Array&&16===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof e&&"number"===typeof g&&
"number"===typeof f&&"number"===typeof k&&"number"===typeof p&&"number"===typeof l&&"number"===typeof h&&"number"===typeof m&&"number"===typeof x&&"number"===typeof n&&"number"===typeof q&&"number"===typeof r&&"number"===typeof t&&"number"===typeof b)return a[0]=d,a[1]=c,a[2]=e,a[3]=g,a[4]=f,a[5]=k,a[6]=p,a[7]=l,a[8]=h,a[9]=m,a[10]=x,a[11]=n,a[12]=q,a[13]=r,a[14]=t,a[15]=b,a}},Transpose:{value:function(){if(arguments[0]instanceof Float32Array&&16===arguments[0].length)return this.Set(arguments[0],
arguments[0][0],arguments[0][4],arguments[0][8],arguments[0][12],arguments[0][1],arguments[0][5],arguments[0][9],arguments[0][13],arguments[0][2],arguments[0][6],arguments[0][10],arguments[0][14],arguments[0][3],arguments[0][7],arguments[0][11],arguments[0][15]);Error("TRANSPOSE",arguments)}},Identity:{value:function(a){return a instanceof Float32Array&&16===a.length?this.Set(a,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1):this.Create(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}},Determinant:{value:function(a){if(a instanceof
Float32Array&&16===a.length)return a[0]*a[5]*a[10]*a[15]+a[0]*a[6]*a[11]*a[13]+a[0]*a[7]*a[9]*a[14]+a[1]*a[4]*a[11]*a[14]+a[1]*a[6]*a[8]*a[15]+a[1]*a[7]*a[10]*a[12]+a[2]*a[4]*a[9]*a[15]+a[2]*a[5]*a[11]*a[12]+a[2]*a[7]*a[8]*a[13]+a[3]*a[4]*a[10]*a[13]+a[3]*a[5]*a[8]*a[14]+a[3]*a[6]*a[9]*a[12]-a[0]*a[5]*a[11]*a[14]-a[0]*a[6]*a[9]*a[15]-a[0]*a[7]*a[10]*a[13]-a[1]*a[4]*a[10]*a[15]-a[1]*a[6]*a[11]*a[12]-a[1]*a[7]*a[8]*a[14]-a[2]*a[4]*a[11]*a[13]-a[2]*a[5]*a[8]*a[15]-a[2]*a[7]*a[9]*a[12]-a[3]*a[4]*a[9]*
a[14]-a[3]*a[5]*a[10]*a[12]-a[3]*a[6]*a[8]*a[13]}},Inverse:{value:function(a){if(a instanceof Float32Array&&16===a.length){var b=this.Determinant(a);return 0!==b?this.Set(a,(a[5]*a[10]*a[15]+a[6]*a[11]*a[13]+a[7]*a[9]*a[14]-a[5]*a[11]*a[14]-a[6]*a[9]*a[15]-a[7]*a[10]*a[13])/b,(a[1]*a[11]*a[14]+a[2]*a[9]*a[15]+a[3]*a[10]*a[13]-a[1]*a[10]*a[15]-a[2]*a[11]*a[13]-a[3]*a[9]*a[14])/b,(a[1]*a[6]*a[15]+a[2]*a[7]*a[13]+a[3]*a[5]*a[14]-a[1]*a[7]*a[14]-a[2]*a[5]*a[15]-a[3]*a[6]*a[13])/b,(a[1]*a[7]*a[10]+a[2]*
a[5]*a[11]+a[3]*a[6]*a[9]-a[1]*a[6]*a[11]-a[2]*a[7]*a[9]-a[3]*a[5]*a[10])/b,(a[4]*a[11]*a[14]+a[6]*a[8]*a[15]+a[7]*a[10]*a[12]-a[4]*a[10]*a[15]-a[6]*a[11]*a[12]-a[7]*a[8]*a[14])/b,(a[0]*a[10]*a[15]+a[2]*a[11]*a[12]+a[3]*a[8]*a[14]-a[0]*a[11]*a[14]-a[2]*a[8]*a[15]-a[3]*a[10]*a[12])/b,(a[0]*a[7]*a[14]+a[2]*a[4]*a[15]+a[3]*a[6]*a[12]-a[0]*a[6]*a[15]-a[2]*a[7]*a[12]-a[3]*a[4]*a[14])/b,(a[0]*a[6]*a[11]+a[2]*a[7]*a[8]+a[3]*a[4]*a[10]-a[0]*a[7]*a[10]-a[2]*a[4]*a[11]-a[3]*a[6]*a[8])/b,(a[4]*a[9]*a[15]+a[5]*
a[11]*a[12]+a[7]*a[8]*a[13]-a[4]*a[11]*a[13]-a[5]*a[8]*a[15]-a[7]*a[9]*a[12])/b,(a[0]*a[11]*a[13]+a[1]*a[8]*a[15]+a[3]*a[9]*a[12]-a[0]*a[9]*a[15]-a[1]*a[11]*a[12]-a[3]*a[8]*a[13])/b,(a[0]*a[5]*a[15]+a[1]*a[7]*a[12]+a[3]*a[4]*a[13]-a[0]*a[7]*a[13]-a[1]*a[4]*a[15]-a[3]*a[5]*a[12])/b,(a[0]*a[7]*a[9]+a[1]*a[4]*a[11]+a[3]*a[5]*a[8]-a[0]*a[5]*a[11]-a[1]*a[7]*a[8]-a[3]*a[4]*a[9])/b,(a[4]*a[10]*a[13]+a[5]*a[8]*a[14]+a[6]*a[9]*a[12]-a[4]*a[9]*a[14]-a[5]*a[10]*a[12]-a[6]*a[8]*a[13])/b,(a[0]*a[9]*a[14]+a[1]*
a[10]*a[12]+a[2]*a[8]*a[13]-a[0]*a[10]*a[13]-a[1]*a[8]*a[14]-a[2]*a[9]*a[12])/b,(a[0]*a[6]*a[13]+a[1]*a[4]*a[14]+a[2]*a[5]*a[12]-a[0]*a[5]*a[14]-a[1]*a[6]*a[12]-a[2]*a[4]*a[13])/b,(a[0]*a[5]*a[10]+a[1]*a[6]*a[8]+a[2]*a[4]*a[9]-a[0]*a[6]*a[9]-a[1]*a[4]*a[10]-a[2]*a[5]*a[8])/b):a}}},Sum:{value:function(a,b){if(a instanceof Float32Array&&16===a.length&&b instanceof Float32Array&&16===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3],a[4]+b[4],a[5]+b[5],a[6]+b[6],a[7]+b[7],a[8]+b[8],
a[9]+b[9],a[10]+b[10],a[11]+b[11],a[12]+b[12],a[13]+b[13],a[14]+b[14],a[15]+b[15])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&16===a.length){if(b instanceof Float32Array&&16===b.length)return this.Set(a,a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*
b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*b,a[5]*b,a[6]*b,a[7]*b,
a[8]*b,a[9]*b,a[10]*b,a[11]*b,a[12]*b,a[13]*b,a[14]*b,a[15]*b)}}},RevMult:{value:function(a,b){if(a instanceof Float32Array&&9===a.length&&b instanceof Float32Array&&16===b.length)return this.Set(b,a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*
b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15])}}})}function ba(){}function Y(){Object.defineProperties(this,{Create:{value:function(a,b){var c=new Float32Array(2);c[0]=
"number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;c[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;Object.defineProperties(c,{Type:{value:"VECTOR2"},X:{get:function(){return c[0]},set:function(a){"number"===typeof a&&(c[0]=a)}},Y:{get:function(){return c[1]},set:function(a){"number"===typeof a&&(c[1]=a)}}});return c}},Set:{value:function(a,b,c){var d;b instanceof Float32Array&&2===a.length?(d=b[0],b=b[1]):(d=b,b=c);if(a instanceof Float32Array&&2===
a.length&&"number"===typeof d&&"number"===typeof b&&"number"===typeof z)return a[0]=d,a[1]=b,a}},Length:{value:function(a){if(a instanceof Float32Array&&2===a.length)return Math.sqrt(a[0]*a[0]+a[1]*a[1])}},Sum:{value:function(a,b){if(a instanceof Float32Array&&2===a.length&&b instanceof Float32Array&&2===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1])}},Diff:{value:function(a,b){if(a instanceof Float32Array&&2===a.length&&b instanceof Float32Array&&2===b.length)return this.Create(b[0]-a[0],b[1]-a[1])}},
Mult:{value:function(a,b){if(a instanceof Float32Array&&2===a.length){if(b instanceof Float32Array&&2===b.length)return this.Set(a,a[0]*b[0],a[1]*b[1]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b)}}},Dot:{value:function(a,b){if(a instanceof Float32Array&&2===a.length&&b instanceof Float32Array&&2===b.length)return a[0]*b[0]+a[1]*b[1]}},Unit:{value:function(a){if(a instanceof Float32Array&&2===a.length){var b=this.Length(a);if(0!==b)return this.Mult(a,1/b)}}},Cross:{value:function(a,b){if(a instanceof
Float32Array&&2===a.length&&b instanceof Float32Array&&2===b.length)return this.Create(a[1]*b[2]+a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]+a[1]*b[0])}}})}function Z(){Object.defineProperties(this,{Create:{value:function(a,b,c){var d=new Float32Array(3);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;Object.defineProperties(d,
{Type:{value:"VECTOR3"},X:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},Y:{get:function(){return d[1]},set:function(a){"number"===typeof a&&(d[1]=a)}},Z:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=a)}}});return d}},Set:{value:function(a,b,c,e){var d;b instanceof Float32Array&&3===a.length?(d=b[0],c=b[1],b=b[2]):(d=b,b=e);if(a instanceof Float32Array&&3===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof b)return a[0]=d,
a[1]=c,a[2]=b,a}},Length:{value:function(a){if(a instanceof Float32Array&&3===a.length)return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}},Sum:{value:function(a,b,c){if(a instanceof Float32Array&&3===a.length&&c instanceof Float32Array&&3===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2])}},Diff:{value:function(a,b,c){if(a instanceof Float32Array&&3===a.length&&c instanceof Float32Array&&3===b.length)return this.Create(b[0]-a[0],b[1]-a[1],b[2]-a[2])}},Mult:{value:function(a,b){if(a instanceof
Float32Array&&3===a.length){if(b instanceof Float32Array&&3===b.length)return this.Set(a,a[0]*b[0],a[1]*b[1],a[2]*b[2]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b)}}},Dot:{value:function(a,b){if(a instanceof Float32Array&&3===a.length&&b instanceof Float32Array&&3===b.length)return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}},Unit:{value:function(a){if(a instanceof Float32Array&&3===a.length){var b=this.Length(a);if(0!==b)return this.Mult(a,1/b)}}},Cross:{value:function(a,b){if(a instanceof
Float32Array&&3===a.length&&b instanceof Float32Array&&3===b.length)return this.Create(a[1]*b[2]+a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]+a[1]*b[0])}}})}function aa(){Object.defineProperties(this,{Create:{value:function(a,b,c,e){var d=new Float32Array(4);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;d[3]="number"===
typeof e?e:a instanceof Array&&"number"===typeof a[3]?a[3]:0;Object.defineProperties(d,{Type:{value:"VECTOR4"},W:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},X:{get:function(){return d[1]},set:function(a){"number"===typeof a&&(d[1]=a)}},Y:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=a)}},Z:{get:function(){return d[3]},set:function(a){"number"===typeof a&&(d[3]=a)}}});return d}},Set:{value:function(a,b,c,e,g){var d;b instanceof Float32Array&&
4===a.length?(d=b[0],c=b[1],e=b[2],b=b[3]):(d=b,b=g);if(a instanceof Float32Array&&4===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof e&&"number"===typeof b)return a[0]=d,a[1]=c,a[2]=e,a[3]=b,a}},Length:{value:function(a){if(a instanceof Float32Array&&4===a.length)return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}},Sum:{value:function(a,b,c){if(a instanceof Float32Array&&4===a.length&&c instanceof Float32Array&&4===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+
b[3])}},Diff:{value:function(a,b,c){if(a instanceof Float32Array&&4===a.length&&c instanceof Float32Array&&4===b.length)return this.Create(b[0]-a[0],b[1]-a[1],b[2]-a[2],b[3]-a[3])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&4===a.length){if(b instanceof Float32Array&&3===b.length)return this.Set(a,a[0]*b[0],a[1]*b[1],a[2]*b[2],a[3]*b[3]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b)}}},Dot:{value:function(a,b){if(a instanceof Float32Array&&4===a.length&&b instanceof
Float32Array&&4===b.length)return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}},Unit:{value:function(a){if(a instanceof Float32Array&&4===a.length){var b=this.Length(a);if(0!==b)return this.Mult(a,1/b)}}}})}function J(a){a||(a={});a.type||(a.type="");a.type="PARTICLESYSTEM ";v.call(this,a)}function ca(){Object.defineProperties(this,{Collision:{value:E},PhysicsBody:{value:F},PhysicsItem:{value:B},PhysicsMaterial:{value:G},Gravity:{value:-9.8},Init:{value:function(){}},PhysicsUpdate:{value:function(){}}})}
function B(a){a||(a={});a.type||(a.type="");a.type+="PHYSICSITEM ";v.call(this,a);var b=a.collision instanceof E?a.collision:void 0,c=a.material instanceof G?a.material:void 0;Object.defineProperties(this,{PhysicsBody:{value:a.body instanceof F?a.body:new F},Collision:{get:function(){return b},set:function(a){a instanceof E?(b=a,b.PhysicsItem=this):void 0===a&&(b=b.PhysicsItem=void 0)}},PhysicsMaterial:{get:function(){return c},set:function(a){a instanceof G&&(c=a)}},PhysicsUpdate:{value:function(){this.PhysicsBody.LockY||
(this.PhysicsBody.Velocity+=FWGE.Game.Time.Delta/1E3*FWGE.Physics.Gravity,this.GameObject.Transform.Position.Y+=this.PhysicsBody.Velocity)}}})}function G(a){a||(a={});a.type||(a.type="");a.type+="PHYSICSMATERIAL ";w.call(this,a)}function F(a){a||(a={});a.type||(a.type="");a.type="PHYSICSBODY ";w.call(this,a);var b="number"===typeof a.mass?a.mass:1,c="boolean"===typeof a.lockx?a.lockx:!0,e="boolean"===typeof a.locky?a.locky:!0,g="boolean"===typeof a.lockz?a.lockz:!0,f=0;Object.defineProperties(this,
{Velocity:{get:function(){return f},set:function(a){"number"===typeof a&&(f=a)}},Mass:{get:function(){return b},set:function(a){"number"===typeof a&&0<=a&&(b=a)}},LockX:{get:function(){return c},set:function(a){"boolean"===typeof a&&(c=a)}},LockY:{get:function(){return e},set:function(a){"boolean"===typeof a&&(e=a)}},LockZ:{get:function(){return g},set:function(a){"boolean"===typeof a&&(g=a)}},Grounded:{get:function(){return!1}}})}function E(a){a||(a={});a.type||(a.type="");a.type="COLLISION ";w.call(this,
a);var b=a.parent instanceof B?a.parent:void 0;Object.defineProperties(this,{PhysicsItem:{get:function(){return b},set:function(){if(arguments[0]instanceof B||void 0===arguments)b=arguments[0]}}})}function da(){var a;Object.defineProperties(this,{Colour:{value:new ea},Mesh:{value:D},RenderMaterial:{value:A},Shader:{value:H},Init:{value:function(){r=new fa;m=new ga;a=new ha;c.enable(c.DEPTH_TEST)}},RenderUpdate:{value:function(){a.Render()}}})}function H(a){a||(a={});if(a.name&&"string"===typeof a.name&&
a.vertexShader&&"string"===typeof a.vertexShader&&a.fragmentShader&&"string"===typeof a.fragmentShader){a.type="SHADER ";w.call(this,a);Object.defineProperties(this,{Program:{value:c.createProgram()},Texture:{value:c.createTexture()},FrameBuffer:{value:c.createFramebuffer()},RenderBuffer:{value:c.createRenderbuffer()},Height:{value:1024},Width:{value:1024}});c.bindFramebuffer(c.FRAMEBUFFER,this.FrameBuffer);c.bindRenderbuffer(c.RENDERBUFFER,this.RenderBuffer);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,this.Width,this.Height);c.bindTexture(c.TEXTURE_2D,this.Texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,this.Width,this.Height,0,c.RGBA,c.UNSIGNED_BYTE,null);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.Texture,
0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,this.RenderBuffer);switch(c.checkFramebufferStatus(c.FRAMEBUFFER)){case c.FRAMEBUFFER_COMPLETE:console.log("Complete");break;case c.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:console.log("Incomplete Attachment");break;case c.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:console.log("Missing Attachment");break;case c.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:console.log("Dimensions");break;case c.FRAMEBUFFER_UNSUPPORTED:console.log("Unsuppported")}c.bindTexture(c.TEXTURE_2D,
null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null);var b=c.createShader(c.VERTEX_SHADER);c.shaderSource(b,a.vertexShader);c.compileShader(b);if(c.getShaderParameter(b,c.COMPILE_STATUS)){var d=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(d,a.fragmentShader);c.compileShader(d);c.getShaderParameter(d,c.COMPILE_STATUS)?(c.attachShader(this.Program,b),c.attachShader(this.Program,d),c.linkProgram(this.Program),c.getProgramParameter(this.Program,c.LINK_STATUS)&&(c.useProgram(this.Program),
Object.defineProperties(this,{Attributes:{value:{Position:c.getAttribLocation(this.Program,"A_Position"),Colour:c.getAttribLocation(this.Program,"A_Colour"),UV:c.getAttribLocation(this.Program,"A_UV"),Normal:c.getAttribLocation(this.Program,"A_Normal")}},Uniforms:{value:{Material:{Ambient:c.getUniformLocation(this.Program,"U_Material.Ambient"),Diffuse:c.getUniformLocation(this.Program,"U_Material.Diffuse"),Specular:c.getUniformLocation(this.Program,"U_Material.Specular"),Shininess:c.getUniformLocation(this.Program,
"U_Material.Shininess"),Alpha:c.getUniformLocation(this.Program,"U_Material.Alpha"),HasImage:c.getUniformLocation(this.Program,"U_Material.HasImage"),HasBump:c.getUniformLocation(this.Program,"U_Material.HasBump"),HasSpecular:c.getUniformLocation(this.Program,"U_Material.HasSpecular")},Matrix:{ModelView:c.getUniformLocation(this.Program,"U_Matrix.ModelView"),Projection:c.getUniformLocation(this.Program,"U_Matrix.Projection"),Normal:c.getUniformLocation(this.Program,"U_Matrix.Normal")},Light:{Ambient:{Colour:c.getUniformLocation(this.Program,
"U_Ambient.Colour"),Intensity:c.getUniformLocation(this.Program,"U_Ambient.Intensity")},Directional:{Colour:c.getUniformLocation(this.Program,"U_Directional.Colour"),Intensity:c.getUniformLocation(this.Program,"U_Directional.Intensity"),Direction:c.getUniformLocation(this.Program,"U_Directional.Direction")},Point:[{Colour:c.getUniformLocation(this.Program,"U_Point[0].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[0].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[0].Position"),
Radius:c.getUniformLocation(this.Program,"U_Point[0].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[0].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[1].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[1].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[1].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[1].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[1].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[2].Colour"),
Intensity:c.getUniformLocation(this.Program,"U_Point[2].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[2].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[2].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[2].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[3].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[3].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[3].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[3].Radius"),
Angle:c.getUniformLocation(this.Program,"U_Point[3].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[4].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[4].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[4].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[4].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[4].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[5].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[5].Intensity"),
Position:c.getUniformLocation(this.Program,"U_Point[5].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[5].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[5].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[6].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[6].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[6].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[6].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[6].Angle")},
{Colour:c.getUniformLocation(this.Program,"U_Point[7].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[7].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[7].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[7].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[7].Angle")}],PointCount:c.getUniformLocation(this.Program,"U_Point_Count")},Sampler:{Image:c.getUniformLocation(this.Program,"U_Sampler.Image"),Bump:c.getUniformLocation(this.Program,"U_Sampler.Bump"),
Specular:c.getUniformLocation(this.Program,"U_Sampler.Specular")}}}}),c.useProgram(null),t.push(this))):console.error(Error("Fragment Shader: "+c.getShaderInfoLog(d)))}else console.error(Error("Vertex Shader: "+c.getShaderInfoLog(b)))}}function ea(){Object.defineProperties(this,{Create:{value:function(a,b,c){var d=new Float32Array(3);d[0]="number"===typeof a?a:"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:"number"===typeof a[2]?a[2]:
0;Object.defineProperties(d,{Type:{value:["COLOUR"]},R:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=Math.clamp(a,0,1))}},G:{get:function(){return d[1]},set:function(a){"number"===typeof a&&(d[1]=Math.clamp(a,0,1))}},B:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=Math.clamp(a,0,1))}}});return d}}})}function D(a){function b(a,b){for(var c=a.length;0<--c;)if("number"!==typeof a[c])return;return new b(a)}a||(a={});a.type||(a.type="");a.type+="MESH ";
v.call(this,a);a.position=b(a.position,Float32Array);a.uvs=b(a.uvs,Float32Array);a.colours=b(a.colours,Float32Array);a.normals=b(a.normals,Float32Array);a.indices=b(a.indices,Uint16Array);Object.defineProperties(this,{PositionBuffer:{value:c.createBuffer()},UVBuffer:{value:c.createBuffer()},ColourBuffer:{value:c.createBuffer()},NormalBuffer:{value:c.createBuffer()},IndexBuffer:{value:c.createBuffer()},VertexCount:{value:a.indices?a.indices.length:0}});a.position&&(c.bindBuffer(c.ARRAY_BUFFER,this.PositionBuffer),
c.bufferData(c.ARRAY_BUFFER,a.position,c.STATIC_DRAW));a.uvs&&(c.bindBuffer(c.ARRAY_BUFFER,this.UVBuffer),c.bufferData(c.ARRAY_BUFFER,a.uvs,c.STATIC_DRAW));a.colours&&(c.bindBuffer(c.ARRAY_BUFFER,this.ColourBuffer),c.bufferData(c.ARRAY_BUFFER,a.colours,c.STATIC_DRAW));a.normals&&(c.bindBuffer(c.ARRAY_BUFFER,this.NormalBuffer),c.bufferData(c.ARRAY_BUFFER,a.normals,c.STATIC_DRAW));a.indices&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.IndexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.indices,c.STATIC_DRAW));
ia.push(this)}function A(a){function b(a){a&&a instanceof Array||(a=[0,0,0]);switch(a.length){case 0:a.position[0]=0;case 1:a.position[1]=0;case 2:a.position[2]=0}return FWGE.Render.Colour.Create(a)}a||(a={});a.type="MATERIAL";w.call(this,a);var d=b(a.ambient),e=b(a.diffuse),g=b(a.specular),f="number"===typeof a.alpha&&0<=a.alpha?a.alpha:1,k="number"===typeof a.shininess&&0<=a.shininess?a.shininess:5,h=a.shader instanceof H?a.shader:void 0,l=void 0,m=void 0,n=void 0;Object.defineProperties(this,{Ambient:{get:function(){return d},
set:function(a){"COLOUR"===a.Type&&FWGE.Game.Maths.Vector3.Set(d,a)}},Diffuse:{get:function(){return e},set:function(a){"COLOUR"===a.Type&&FWGE.Game.Maths.Vector3.Set(e,a)}},Specular:{get:function(){return g},set:function(a){"COLOUR"===a.Type&&FWGE.Game.Maths.Vector3.Set(g,a)}},Alpha:{get:function(){return f},set:function(a){"number"===typeof a&&(f=a)}},Shininess:{get:function(){return k},set:function(a){"number"===typeof a&&(k=a)}},Shader:{get:function(){return h},set:function(a){a instanceof H&&
(h=a)}},ImageMap:{get:function(){return l},set:function(a){a instanceof WebGLTexture?l=a:void 0===a&&(c.deleteTexture(l),l=void 0)}},BumpMap:{get:function(){return m},set:function(a){a instanceof WebGLTexture?m=a:void 0===a&&(c.deleteTexture(m),m=void 0)}},SpecularMap:{get:function(){return n},set:function(a){a instanceof WebGLTexture?n=a:void 0===a&&(c.deleteTexture(n),n=void 0)}}});this.SetTextures(a);ja.push(this)}function fa(){var a=[];Object.defineProperties(this,{PushMatrix:{value:function(){var b=
this.PeekMatrix();a.push(FWGE.Game.Maths.Matrix4.Create(b.M11,b.M12,b.M13,b.M14,b.M21,b.M22,b.M23,b.M24,b.M31,b.M32,b.M33,b.M34,b.M41,b.M42,b.M43,b.M44))}},PeekMatrix:{value:function(){if(0===a.length){var b=FWGE.Game.Maths.Matrix4.Identity();b.M41=-FWGE.Game.Camera.Transform.Position.X;b.M42=-FWGE.Game.Camera.Transform.Position.Y;b.M43=-FWGE.Game.Camera.Transform.Position.Z;return b}return a[a.length-1]}},PopMatrix:{value:function(){return a.pop()}},Transform:{value:function(a){FWGE.Game.Maths.Matrix4.Set(this.PeekMatrix(),
this.Shear(this.Scale(this.Rotate(this.Translate(this.PeekMatrix(),a.Position),a.Rotation),a.Scale),a.Shear))}},Translate:{value:function(a,c){return FWGE.Game.Maths.Matrix4.Create(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[0]*c[0]+a[4]*c[1]+a[8]*c[2]+a[12],a[1]*c[0]+a[5]*c[1]+a[9]*c[2]+a[13],a[2]*c[0]+a[6]*c[1]+a[10]*c[2]+a[14],a[3]*c[0]+a[7]*c[1]+a[11]*c[2]+a[15])}},RotateAround:{value:function(){}},Rotate:{value:function(a,c){return FWGE.Game.Maths.Matrix4.Mult(FWGE.Game.Maths.Matrix4.Create(1,
0,0,0,0,Math.cos(c[0]),-Math.sin(c[0]),0,0,Math.sin(c[0]),Math.cos(c[0]),0,0,0,0,1),FWGE.Game.Maths.Matrix4.Mult(FWGE.Game.Maths.Matrix4.Create(Math.cos(c[1]),0,Math.sin(c[1]),0,0,1,0,0,-Math.sin(c[1]),0,Math.cos(c[1]),0,0,0,0,1),FWGE.Game.Maths.Matrix4.Mult(FWGE.Game.Maths.Matrix4.Create(Math.cos(c[2]),-Math.sin(c[2]),0,0,Math.sin(c[2]),Math.cos(c[2]),0,0,0,0,1,0,0,0,0,1),a)))}},Scale:{value:function(a,c){return FWGE.Game.Maths.Matrix4.Create(a[0]*c[0],a[1]*c[0],a[2]*c[0],a[3]*c[0],a[4]*c[1],a[5]*
c[1],a[6]*c[1],a[7]*c[1],a[8]*c[2],a[9]*c[2],a[10]*c[2],a[11]*c[2],a[12],a[13],a[14],a[15],a[12],a[13],a[14],a[15])}},Shear:{value:function(a,c){var b=Math.radian(c[0]),d=Math.radian(c[1]);c=Math.radian(c[2]);return FWGE.Game.Maths.Matrix4.Mult(FWGE.Game.Maths.Matrix4.Create(1,0,Math.tan(c),0,Math.tan(b),1,0,0,0,Math.tan(d),1,0,0,0,0,1),a)}}})}function ga(){var a=FWGE.Game.Maths.Matrix4.Identity();Object.defineProperties(this,{ProjectionUpdate:{value:function(){switch(FWGE.Game.Camera.Mode){case FWGE.Game.Camera.PERSPECTIVE:var b=
FWGE.Game.Camera.Aspect,c=FWGE.Game.Camera.Near,e=FWGE.Game.Camera.Far,g=c*Math.tan(Math.radian(FWGE.Game.Camera.FOV)),b=g*b,f=-b,k=-g,h=b-f,l=g-k,m=e-c;FWGE.Game.Maths.Matrix4.Set(a,2*c/h,0,0,0,0,2*c/l,0,0,(b+f)/h,(g+k)/l,-(e+c)/m,-1,0,0,-(2*e*c)/m,1);break;case FWGE.Game.Camera.ORTHOGRAPHIC:c=FWGE.Game.Camera.Left,e=FWGE.Game.Camera.Right,g=FWGE.Game.Camera.Top,b=FWGE.Game.Camera.Bottom,f=FWGE.Game.Camera.Near,k=FWGE.Game.Camera.Far,h=FWGE.Game.Camera.Theta,l=FWGE.Game.Camera.Phi,h=Math.cot(Math.radian(h)),
l=Math.cot(Math.radian(l)),c-=f*h,e-=f*h,g-=f*l,b-=f*l,FWGE.Game.Maths.Matrix4.Set(a,2/(e-c),0,0,0,0,2/(g-b),0,0,h,l,-2/(k-f),0,-(c+e)/(e-c),-(g+b)/(g-b),-(k+f)/(k-f),1)}}},GetViewer:{value:function(){return a}}})}function ha(){var a=function(){console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\nattribute vec3 A_Position;\nattribute vec2 A_UV;\n\nuniform mat4 P;\nuniform mat4 MV;\n\nvarying vec2 V_UV;\n\nvoid main(void)\n{\n\tV_UV \x3d A_UV;\n\tgl_Position \x3d P * MV * vec4(A_Position, 1.0);\n}\n\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\nprecision mediump float;\n\nconst int MAX_SHADERS \x3d 8;\nuniform int U_Sampler_Count;\nuniform sampler2D U_Samplers[8];\n\nvarying vec2 V_UV;\n\nvoid main(void)\n{\n\t/*for (int i \x3d 0; i \x3c MAX_SHADERS; ++i)\n\t{\n\t\tif (i \x3d\x3d U_Sampler_Count) break;\n\t\tgl_FragColor *\x3d texture2D(U_Samplers[i], V_UV);\n\t}*/\n\tgl_FragColor \x3d vec4(1.0);\n}\n\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\n");
return new function(){var a=c.createShader(c.VERTEX_SHADER);c.shaderSource(a,"attribute vec3 A_Position;\nattribute vec2 A_UV;\n\nuniform mat4 P;\nuniform mat4 MV;\n\nvarying vec2 V_UV;\n\nvoid main(void)\n{\n\tV_UV \x3d A_UV;\n\tgl_Position \x3d P * MV * vec4(A_Position, 1.0);\n}\n");c.compileShader(a);var d=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(d,"precision mediump float;\n\nconst int MAX_SHADERS \x3d 8;\nuniform int U_Sampler_Count;\nuniform sampler2D U_Samplers[8];\n\nvarying vec2 V_UV;\n\nvoid main(void)\n{\n\t/*for (int i \x3d 0; i \x3c MAX_SHADERS; ++i)\n\t{\n\t\tif (i \x3d\x3d U_Sampler_Count) break;\n\t\tgl_FragColor *\x3d texture2D(U_Samplers[i], V_UV);\n\t}*/\n\tgl_FragColor \x3d vec4(1.0);\n}\n");
c.compileShader(d);this.Program=c.createProgram();c.attachShader(this.Program,a);c.attachShader(this.Program,d);c.linkProgram(this.Program);c.useProgram(this.Program);this.PositionPointer=c.getAttribLocation(this.Program,"A_Position");c.enableVertexAttribArray(this.PositionPointer);this.UVPointer=c.getAttribLocation(this.Program,"A_UV");c.enableVertexAttribArray(this.UVPointer);this.Samplers=[];for(a=0;8>a;++a)this.Samplers.push(c.getUniformLocation(this.Program,"U_Samplers["+a+"]"));this.SamplerCount=
c.getUniformLocation(this.Program,"U_Sampler_Count");this.ModelView=c.getUniformLocation(this.Program,"MV");this.Projection=c.getUniformLocation(this.Program,"P");this.PositionBuffer=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.PositionBuffer);c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,1,1,0]),c.STATIC_DRAW);this.UVBuffer=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.UVBuffer);c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),c.STATIC_DRAW);this.IndexBuffer=
c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.IndexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),c.STATIC_DRAW);c.useProgram(null)}}();console.log(a);Object.defineProperties(this,{Render:{value:function(){this.ClearBuffers();for(var a=q.length;0<=--a;)this.SetGlobalUniforms(),this.RenderObject(q[a]);this.FinalDraw()}},ClearBuffers:{value:function(){for(var a=t.length;0<=--a;){var d=t[a];c.bindFramebuffer(c.FRAMEBUFFER,d.FrameBuffer);c.viewport(0,0,d.Width,
d.Height);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)}c.bindFramebuffer(c.FRAMEBUFFER,null);c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)}},RenderObject:{value:function(a){r.PushMatrix();r.Transform(a.Transform);for(var b=a.Children.length;0<=--b;)this.RenderObject(a.Children[b]);a.Mesh&&a.RenderMaterial&&(b=a.RenderMaterial.Shader,c.useProgram(b.Program),c.enableVertexAttribArray(b.Attributes.Position),-1!==b.Attributes.Normal&&c.enableVertexAttribArray(b.Attributes.Normal),
-1!==b.Attributes.Colour&&c.enableVertexAttribArray(b.Attributes.Colour),-1!==b.Attributes.UV&&c.enableVertexAttribArray(b.Attributes.UV),1!==a.RenderMaterial.Alpha&&(c.enable(c.BLEND),c.disable(c.DEPTH_TEST),c.blendFunc(c.SRC_ALPHA,c.ONE)),this.BindAttributes(a.Mesh,a.RenderMaterial,b.Attributes),this.SetObjectUniforms(a.RenderMaterial,b.Uniforms),this.Draw(a.Mesh.VertexCount,b.FrameBuffer),1!==a.RenderMaterial.Alpha&&(c.enable(c.DEPTH_TEST),c.disable(c.BLEND)),c.disableVertexAttribArray(b.Attributes.Position),
-1!==b.Attributes.Normal&&c.disableVertexAttribArray(b.Attributes.Normal),-1!==b.Attributes.Colour&&c.disableVertexAttribArray(b.Attributes.Colour),-1!==b.Attributes.UV&&c.disableVertexAttribArray(b.Attributes.UV),c.useProgram(null));r.PopMatrix()}},BindAttributes:{value:function(a,d,e){c.bindBuffer(c.ARRAY_BUFFER,a.PositionBuffer);c.vertexAttribPointer(e.Position,3,c.FLOAT,!1,0,0);-1!==e.UV&&(a.UVBuffer?(c.bindBuffer(c.ARRAY_BUFFER,a.UVBuffer),c.vertexAttribPointer(e.UV,2,c.FLOAT,!1,0,0)):c.disableVertexAttribArray(e.UV));
-1!==e.Colour&&(a.ColourBuffer?(c.bindBuffer(c.ARRAY_BUFFER,a.ColourBuffer),c.vertexAttribPointer(e.Colour,3,c.FLOAT,!1,0,0)):c.disableVertexAttribArray(e.Colour));-1!==e.Normal&&(a.NormalBuffer?(c.bindBuffer(c.ARRAY_BUFFER,a.NormalBuffer),c.vertexAttribPointer(e.Normal,3,c.FLOAT,!1,0,0)):c.disableVertexAttribArray(e.Normal));c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a.IndexBuffer)}},SetObjectUniforms:{value:function(a,d){c.uniformMatrix4fv(d.Matrix.ModelView,!1,r.PeekMatrix());c.uniformMatrix3fv(d.Matrix.Normal,
!1,this.CalculateNormalMatrix());c.uniform3fv(d.Material.Ambient,a.Ambient);c.uniform3fv(d.Material.Diffuse,a.Diffuse);c.uniform3fv(d.Material.Specular,a.Specular);c.uniform1f(d.Material.Shininess,a.Shininess);c.uniform1f(d.Material.Alpha,a.Alpha);a.ImageMap?(c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,a.ImageMap),c.uniform1i(d.Material.HasImage,1),c.uniform1i(d.Sampler.Image,0)):(c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,null),c.uniform1i(d.Material.HasImage,0));a.BumpMap?
(c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,a.BumpMap),c.uniform1i(d.Material.HasBump,1),c.uniform1i(d.Sampler.Bump,1)):(c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,null),c.uniform1i(d.Material.HasBump,0));a.SpecularMap?(c.activeTexture(c.TEXTURE2),c.bindTexture(c.TEXTURE_2D,a.SpecularMap),c.uniform1i(d.Material.HasSpecular,1),c.uniform1i(d.Sampler.Specular,2)):(c.activeTexture(c.TEXTURE2),c.bindTexture(c.TEXTURE_2D,null),c.uniform1i(d.Material.HasBump,0))}},SetGlobalUniforms:{value:function(){for(var a=
t.length;0<=--a;){var d=0;c.useProgram(t[a].Program);for(var e=t[a].Uniforms.Light,g=h.length;0<=--g;){var f=h[g];if(f)switch(f.Type[0]){case "AMBIENTLIGHT":c.uniform3fv(e.Ambient.Colour,f.Colour);c.uniform1f(e.Ambient.Intensity,f.Intensity);break;case "DIRECTIONALLIGHT":c.uniform3fv(e.Directional.Colour,f.Colour);c.uniform1f(e.Directional.Intensity,f.Intensity);c.uniform3fv(e.Directional.Direction,f.Direction);break;case "POINTLIGHT":r.PushMatrix();r.Transform(f.GameObject.Transform);var k=r.PopMatrix();
c.uniform3fv(e.Point[d].Colour,f.Colour);c.uniform1f(e.Point[d].Intensity,f.Intensity);c.uniform3f(e.Point[d].Position,k.M41,k.M42,k.M43);c.uniform1f(e.Point[d].Radius,f.Radius);c.uniform1f(e.Point[d].Angle,f.Angle);d++}}c.uniform1i(e.PointCount,d);c.uniformMatrix4fv(t[a].Uniforms.Matrix.Projection,!1,m.GetViewer())}c.useProgram(null)}},CalculateNormalMatrix:{value:function(){var a=r.PeekMatrix();FWGE.Game.Maths.Matrix4.Inverse(a);return FWGE.Game.Maths.Matrix3.Create(a.M11,a.M21,a.M31,a.M12,a.M22,
a.M32,a.M13,a.M23,a.M33)}},Draw:{value:function(a,d){c.bindFramebuffer(c.FRAMEBUFFER,d);c.drawElements(c.TRIANGLES,a,c.UNSIGNED_SHORT,0);c.bindFramebuffer(c.FRAMEBUFFER,null)}},FinalDraw:{value:function(){c.useProgram(a.Program);c.bindFramebuffer(c.FRAMEBUFFER,null);c.bindBuffer(c.ARRAY_BUFFER,a.PositionBuffer);c.vertexAttribPointer(a.PositionPointer,3,c.FLOAT,!1,0,0);c.bindBuffer(c.ARRAY_BUFFER,a.UVBuffer);c.vertexAttribPointer(a.UVPointer,2,c.FLOAT,!1,0,0);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a.IndexBuffer);
c.uniformMatrix4fv(a.ModelView,!1,r.PeekMatrix());c.uniformMatrix4fv(a.Projection,!1,m.GetViewer());c.uniform1i(a.SamplerCount,1);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,t[0].Texture);c.uniform1i(a.Samplers[0],0);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);c.bindFramebuffer(c.FRAMEBUFFER,null);c.useProgram(null)}}});m.ProjectionUpdate()}var c=void 0;Object.defineProperties(Math,{cot:{value:function(a){return 1/Math.tan(a)}},radian:{value:function(a){return Math.PI/180*a}},clamp:{value:function(a,
b,c){return Math.max(Math.min(a,c),b)}}});var R=new function(){var a=0;this.next=function(){return a++}},q=[];Object.defineProperties(n.prototype,{constructor:{value:n},Clone:{value:function(a){a=a instanceof n?a:this;for(var b=new n({name:a.Name,material:a.Material,mesh:a.Mesh,transform:new u({position:a.Transform.Position,rotation:a.Transform.Rotation,scale:a.Transform.Scale,shear:a.Transform.Shear}),physics:a.Physics,animation:a.Animation}),c=0;c<a.Children.length;++c)b.Children.push(a.Children[c].Clone());
return b}},Destroy:{value:function(a){var b=this;"number"!==typeof a&&(a=0);setTimeout(function(){for(var a=q.length;0<=--a;)if(q[a]===b){q.splice(a,1);break}b.End()},1E3*a)}},ObjectUpdate:{value:function(){this.Update();this.Transform.TransformUpdate();this.PhysicsItem&&this.PhysicsItem.PhysicsUpdate();this.Animation&&this.Animation.AnimationUpdate();this.ParticleSystem&&this.ParticleSystem.ParticleSystemUpdate()}}});Object.defineProperties(u.prototype,{constructor:{value:u},TransformUpdate:{value:function(){}}});
var h=Array(12),t=[],ia=[],ja=[];Object.defineProperties(A.prototype,{constructor:{value:A},SetTextures:{value:function(a){function b(a,b){var d=new Image;d.onload=function(){c.bindTexture(c.TEXTURE_2D,b);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,d);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR_MIPMAP_NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null)};d.src=a}a||(a={});"string"===typeof a.imagemap&&(this.ImageMap||(this.ImageMap=c.createTexture()),b(a.imagemap,this.ImageMap));"string"===typeof a.bumpmap&&(this.BumpMap||(this.BumpMap=c.createTexture()),b(a.bumpmap,this.BumpMap));"string"===typeof a.specularmap&&(this.SpecularMap||(this.SpecularMap=c.createTexture()),b(a.specularmap,this.Specular))}}});var r,m;window.FWGE=
new function(){Object.defineProperties(this,{Game:{value:new L},Physics:{value:new ca},Render:{value:new da},Init:{value:function(a){a||(a={});a.clear&&a.clear instanceof Float32Array&&4!==a.clear.length||(a.clear=[0,0,0,0]);c=canvas.getContext("webgl")||canvas.getContext("experimental-webgl");if(!c)throw"Webgl context could not be initialized.";c.clearColor(a.clear[0]||0,a.clear[1]||0,a.clear[2]||0,a.clear[3]||0);this.Game.Init();this.Physics.Init();this.Render.Init()}}})}})();