(function(){function F(){var a=!1,b=void 0;Object.defineProperties(this,{GameObject:{value:p},Animation:{value:y},Input:{value:new G},Time:{value:new H},Transform:{value:u},Light:{value:new I},Maths:{value:new J},ParticleSystem:{value:A},Camera:{value:new K},Init:{value:function(){}},Run:{value:function(){b=window.requestAnimationFrame(FWGE.Game.Run);a&&(FWGE.Game.GameUpdate(),FWGE.Physics.PhysicsUpdate(),FWGE.Render.RenderUpdate())}},GameUpdate:{value:function(){FWGE.Game.Time.TimeUpdate();for(var a=
n.length;0<=--a;)n[a].ObjectUpdate();FWGE.Game.Input.InputUpdate()}},Start:{value:function(){a||(a=!0);b||this.Run()}},Stop:{value:function(){a&&(a=!1);b&&(window.cancelAnimationFrame(b),b=void 0)}}})}function D(a){a||(a={});var b=a.name||"Item";Object.defineProperties(this,{Type:{value:a.type||"ITEM"},Name:{get:function(){return b},set:function(a){"string"===typeof a&&(b=a)}}})}function q(a){a||(a={});D.call(this,a);var b=a.gameobject;Object.defineProperties(this,{GameObject:{get:function(){return b},
set:function(a){if(a instanceof p||void 0===a)b=a}}})}function p(a){a||(a={});a.type="GAMEOBJECT";a.name="string"===typeof a.name?a.name:"GameObject";q.call(this,a);var b=[],c=a.material instanceof x?a.material:void 0,e=a.mesh instanceof B?a.mesh:void 0,f=a.physicsitem instanceof v?a.physicsitem:void 0,h=a.animation instanceof y?a.animation:void 0,g=a.particlesystem instanceof A?a.particlesystem:void 0,k="function"===typeof a.begin?a.begin:function(){},l="function"===typeof a.update?a.update:function(){},
r="function"===typeof a.end?a.end:function(){};Object.defineProperties(this,{ID:{value:"[go-"+L.next()+"]"},Transform:{value:a.transform instanceof u?a.transform:new u},Children:{get:function(){return b}},AddChild:{value:function(a){if(a instanceof p){b.push(a);var c=n.indexOf(a);-1!==c&&n.slice(c,1)}return a}},RemoveChild:{value:function(a){if(a instanceof p){var c=b.indexOf(a);-1!==c&&(b.slice(c,1),n.push(a))}return a}},RenderMaterial:{get:function(){return c},set:function(a){if(a instanceof x||
void 0===a)c=a}},Mesh:{get:function(){return e},set:function(a){if(a instanceof B||void 0===a)e=a}},PhysicsItem:{get:function(){return f},set:function(a){if(a instanceof v||void 0===a)f=a}},Animation:{get:function(){return h},set:function(a){if(a instanceof y||void 0===a)h=a}},ParticleSystem:{get:function(){return g},set:function(a){if(a instanceof A||void 0===a)g=a}},Begin:{get:function(){return k},set:function(a){"function"===typeof a&&(k=a)}},Update:{get:function(){return l},set:function(a){"function"===
typeof a&&(l=a)}},End:{get:function(){return r},set:function(a){"function"===typeof a&&(r=a)}}});this.Begin();n.push(this)}function K(){var a=0,b=35,d=16/9,e=.1,f=900,h=-10,g=10,k=10,l=10,r=90,E=90;Object.defineProperties(this,{PERSPECTIVE:{value:0},ORTHOGRAPHIC:{value:1},Mode:{get:function(){return a},set:function(b){if(b===this.PERSPECTIVE||b===this.ORTHOGRAPHIC)a=b}},FOV:{get:function(){return b},set:function(a){"number"===typeof a&&(b=a)}},Aspect:{get:function(){return d},set:function(a){"number"===
typeof a&&(d=a)}},Near:{get:function(){return e},set:function(a){"number"===typeof a&&(e=a)}},Far:{get:function(){return f},set:function(a){"number"===typeof a&&(f=a)}},Left:{get:function(){return h},set:function(a){"number"===typeof a&&(h=a)}},Right:{get:function(){return g},set:function(a){"number"===typeof a&&(g=a)}},Top:{get:function(){return k},set:function(a){"number"===typeof a&&(k=a)}},Bottom:{get:function(){return l},set:function(a){"number"===typeof a&&(l=a)}},Theta:{get:function(){return r},
set:function(a){"number"===typeof a&&(r=a)}},Phi:{get:function(){return E},set:function(a){"number"===typeof a&&(E=a)}},CameraUpdate:{value:function(){c.canvas.height=c.canvas.clientHeight;c.canvas.width=c.canvas.clientWidth;d=c.drawingBufferWidth/c.drawingBufferHeight}}})}function y(a){a||(a={});a.type="ANIMATION";q.call(this,a)}function H(){var a=void 0,b=void 0;Object.defineProperties(this,{Delta:{get:function(){return(a-b)/60}},DeltaTime:{get:function(){return a-b}},Now:{get:function(){return new Date(Date.now())}},
TimeUpdate:{value:function(){void 0===a&&void 0===b?a=b=Date.now():(b=a,a=Date.now())}}})}function u(a){function b(a){a&&a instanceof Array||(a=[0,0,0]);switch(a.length){case 0:a[0]=0;case 1:a[1]=0;case 2:a[2]=0}return FWGE.Game.Maths.Vector3.Create(a)}a||(a={});a.type="TRANSFORM";q.call(this,a);var c=b(a.position),e=b(a.rotation),f=b(a.scale),h=b(a.shear),g=FWGE.Game.Maths.Vector3.Create(0,1,0),k=FWGE.Game.Maths.Vector3.Create(0,0,1),l=FWGE.Game.Maths.Vector3.Create(1,0,0);Object.defineProperties(this,
{Position:{get:function(){return c},set:function(a){"VECTOR3"===a.Type&&FWGE.Game.Maths.Vector3.Set(c,a)}},Rotation:{get:function(){return e},set:function(a){"VECTOR3"===a.Type&&FWGE.Game.Maths.Vector3.Set(e,a)}},Scale:{get:function(){return f},set:function(a){"VECTOR3"===a.Type&&FWGE.Game.Maths.Vector3.Set(f,a)}},Shear:{get:function(){return h},set:function(a){"VECTOR3"===a.Type&&FWGE.Game.Maths.Vector3.Set(h,a)}},Up:{get:function(){return g}},Forward:{get:function(){return k}},Right:{get:function(){return l}}});
this.TransformUpdate()}function G(){function a(a){var b=a.which||a.keyCode||0;a.preventDefault();a.stopPropagation();a.cancelBubble=!0;return b}for(var b=Array(384),c=0;128>c;++c)b[c]=!0;for(c=128;384>c;++c)b[c]=!1;window.onkeyup=function(c){c=a(c);b[c+0]=!0;b[c+128]=!1;b[c+256]=!1};window.onkeydown=function(c){c=a(c);b[c+0]=!1;b[c+128]=!0;b[c+256]=!0};document.body.oncontextmenu=function(b){a(b);return!1};window.onmouseenter=function(b){a(b)};window.onmousemove=function(b){a(b)};window.onmouseleave=
function(b){a(b)};window.onmousedown=function(b){a(b)};window.onmouseup=function(b){a(b)};Object.defineProperties(this,{KEY_F1_UP:{get:function(){return b[112]}},KEY_F1_PRESS:{get:function(){return b[240]}},KEY_F1_DOWN:{get:function(){return b[368]}},KEY_F2_UP:{get:function(){return b[113]}},KEY_F2_PRESS:{get:function(){return b[241]}},KEY_F2_DOWN:{get:function(){return b[369]}},KEY_F3_UP:{get:function(){return b[114]}},KEY_F3_PRESS:{get:function(){return b[242]}},KEY_F3_DOWN:{get:function(){return b[370]}},
KEY_F4_UP:{get:function(){return b[115]}},KEY_F4_PRESS:{get:function(){return b[243]}},KEY_F4_DOWN:{get:function(){return b[371]}},KEY_F5_UP:{get:function(){return b[116]}},KEY_F5_PRESS:{get:function(){return b[244]}},KEY_F5_DOWN:{get:function(){return b[372]}},KEY_F6_UP:{get:function(){return b[117]}},KEY_F6_PRESS:{get:function(){return b[245]}},KEY_F6_DOWN:{get:function(){return b[373]}},KEY_F7_UP:{get:function(){return b[118]}},KEY_F7_PRESS:{get:function(){return b[246]}},KEY_F7_DOWN:{get:function(){return b[374]}},
KEY_F8_UP:{get:function(){return b[119]}},KEY_F8_PRESS:{get:function(){return b[247]}},KEY_F8_DOWN:{get:function(){return b[375]}},KEY_F9_UP:{get:function(){return b[120]}},KEY_F9_PRESS:{get:function(){return b[248]}},KEY_F9_DOWN:{get:function(){return b[376]}},KEY_F10_UP:{get:function(){return b[121]}},KEY_F10_PRESS:{get:function(){return b[249]}},KEY_F10_DOWN:{get:function(){return b[377]}},KEY_F11_UP:{get:function(){return b[122]}},KEY_F11_PRESS:{get:function(){return b[250]}},KEY_F11_DOWN:{get:function(){return b[378]}},
KEY_F12_UP:{get:function(){return b[123]}},KEY_F12_PRESS:{get:function(){return b[251]}},KEY_F12_DOWN:{get:function(){return b[379]}},KEY_0_UP:{get:function(){return b[48]}},KEY_0_PRESS:{get:function(){return b[176]}},KEY_0_DOWN:{get:function(){return b[304]}},KEY_1_UP:{get:function(){return b[49]}},KEY_1_PRESS:{get:function(){return b[177]}},KEY_1_DOWN:{get:function(){return b[305]}},KEY_2_UP:{get:function(){return b[50]}},KEY_2_PRESS:{get:function(){return b[178]}},KEY_2_DOWN:{get:function(){return b[306]}},
KEY_3_UP:{get:function(){return b[51]}},KEY_3_PRESS:{get:function(){return b[179]}},KEY_3_DOWN:{get:function(){return b[307]}},KEY_4_UP:{get:function(){return b[52]}},KEY_4_PRESS:{get:function(){return b[180]}},KEY_4_DOWN:{get:function(){return b[308]}},KEY_5_UP:{get:function(){return b[53]}},KEY_5_PRESS:{get:function(){return b[181]}},KEY_5_DOWN:{get:function(){return b[309]}},KEY_6_UP:{get:function(){return b[54]}},KEY_6_PRESS:{get:function(){return b[182]}},KEY_6_DOWN:{get:function(){return b[310]}},
KEY_7_UP:{get:function(){return b[55]}},KEY_7_PRESS:{get:function(){return b[183]}},KEY_7_DOWN:{get:function(){return b[311]}},KEY_8_UP:{get:function(){return b[56]}},KEY_8_PRESS:{get:function(){return b[184]}},KEY_8_DOWN:{get:function(){return b[312]}},KEY_9_UP:{get:function(){return b[57]}},KEY_9_PRESS:{get:function(){return b[185]}},KEY_9_DOWN:{get:function(){return b[313]}},KEY_NUMPAD_0_UP:{get:function(){return b[96]}},KEY_NUMPAD_0_PRESS:{get:function(){return b[224]}},KEY_NUMPAD_0_DOWN:{get:function(){return b[352]}},
KEY_NUMPAD_1_UP:{get:function(){return b[97]}},KEY_NUMPAD_1_PRESS:{get:function(){return b[225]}},KEY_NUMPAD_1_DOWN:{get:function(){return b[353]}},KEY_NUMPAD_2_UP:{get:function(){return b[98]}},KEY_NUMPAD_2_PRESS:{get:function(){return b[226]}},KEY_NUMPAD_2_DOWN:{get:function(){return b[354]}},KEY_NUMPAD_3_UP:{get:function(){return b[99]}},KEY_NUMPAD_3_PRESS:{get:function(){return b[227]}},KEY_NUMPAD_3_DOWN:{get:function(){return b[355]}},KEY_NUMPAD_4_UP:{get:function(){return b[100]}},KEY_NUMPAD_4_PRESS:{get:function(){return b[228]}},
KEY_NUMPAD_4_DOWN:{get:function(){return b[356]}},KEY_NUMPAD_5_UP:{get:function(){return b[101]}},KEY_NUMPAD_5_PRESS:{get:function(){return b[229]}},KEY_NUMPAD_5_DOWN:{get:function(){return b[357]}},KEY_NUMPAD_6_UP:{get:function(){return b[102]}},KEY_NUMPAD_6_PRESS:{get:function(){return b[230]}},KEY_NUMPAD_6_DOWN:{get:function(){return b[358]}},KEY_NUMPAD_7_UP:{get:function(){return b[103]}},KEY_NUMPAD_7_PRESS:{get:function(){return b[231]}},KEY_NUMPAD_7_DOWN:{get:function(){return b[359]}},KEY_NUMPAD_8_UP:{get:function(){return b[104]}},
KEY_NUMPAD_8_PRESS:{get:function(){return b[232]}},KEY_NUMPAD_8_DOWN:{get:function(){return b[360]}},KEY_NUMPAD_9_UP:{get:function(){return b[105]}},KEY_NUMPAD_9_PRESS:{get:function(){return b[233]}},KEY_NUMPAD_9_DOWN:{get:function(){return b[361]}},KEY_DIVIDE_UP:{get:function(){return b[111]}},KEY_DIVIDE_PRESS:{get:function(){return b[239]}},KEY_DIVIDE_DOWN:{get:function(){return b[367]}},KEY_MULTIPLY_UP:{get:function(){return b[106]}},KEY_MULTIPLY_PRESS:{get:function(){return b[234]}},KEY_MULTIPLY_DOWN:{get:function(){return b[362]}},
KEY_SUBTRACT_UP:{get:function(){return b[109]}},KEY_SUBTRACT_PRESS:{get:function(){return b[237]}},KEY_SUBTRACT_DOWN:{get:function(){return b[365]}},KEY_ADD_UP:{get:function(){return b[107]}},KEY_ADD_PRESS:{get:function(){return b[235]}},KEY_ADD_DOWN:{get:function(){return b[363]}},KEY_TAB_UP:{get:function(){return b[9]}},KEY_TAB_PRESS:{get:function(){return b[137]}},KEY_TAB_DOWN:{get:function(){return b[265]}},KEY_CAPS_UP:{get:function(){return b[20]}},KEY_CAPS_PRESS:{get:function(){return b[148]}},
KEY_CAPS_DOWN:{get:function(){return b[276]}},KEY_SHIFT_UP:{get:function(){return b[16]}},KEY_SHIFT_PRESS:{get:function(){return b[144]}},KEY_SHIFT_DOWN:{get:function(){return b[272]}},KEY_CTRL_UP:{get:function(){return b[17]}},KEY_CTRL_PRESS:{get:function(){return b[145]}},KEY_CTRL_DOWN:{get:function(){return b[273]}},KEY_ALT_UP:{get:function(){return b[18]}},KEY_ALT_PRESS:{get:function(){return b[146]}},KEY_ALT_DOWN:{get:function(){return b[274]}},KEY_BACKSPACE_UP:{get:function(){return b[8]}},
KEY_BACKSPACE_PRESS:{get:function(){return b[136]}},KEY_BACKSPACE_DOWN:{get:function(){return b[264]}},KEY_ENTER_UP:{get:function(){return b[13]}},KEY_ENTER_PRESS:{get:function(){return b[141]}},KEY_ENTER_DOWN:{get:function(){return b[269]}},KEY_UP_UP:{get:function(){return b[38]}},KEY_UP_PRESS:{get:function(){return b[166]}},KEY_UP_DOWN:{get:function(){return b[294]}},KEY_LEFT_UP:{get:function(){return b[37]}},KEY_LEFT_PRESS:{get:function(){return b[165]}},KEY_LEFT_DOWN:{get:function(){return b[293]}},
KEY_RIGHT_UP:{get:function(){return b[40]}},KEY_RIGHT_PRESS:{get:function(){return b[168]}},KEY_RIGHT_DOWN:{get:function(){return b[296]}},KEY_DOWN_UP:{get:function(){return b[39]}},KEY_DOWN_PRESS:{get:function(){return b[167]}},KEY_DOWN_DOWN:{get:function(){return b[295]}},KEY_BRACKET_L_UP:{get:function(){return b[219]}},KEY_BRACKET_L_PRESS:{get:function(){return b[347]}},KEY_BRACKET_L_DOWN:{get:function(){return b[475]}},KEY_BRACKET_R_UP:{get:function(){return b[221]}},KEY_BRACKET_R_PRESS:{get:function(){return b[349]}},
KEY_BRACKET_R_DOWN:{get:function(){return b[477]}},KEY_COLON_UP:{get:function(){return b[186]}},KEY_COLON_PRESS:{get:function(){return b[314]}},KEY_COLON_DOWN:{get:function(){return b[442]}},KEY_QUOTE_UP:{get:function(){return b[222]}},KEY_QUOTE_PRESS:{get:function(){return b[350]}},KEY_QUOTE_DOWN:{get:function(){return b[478]}},KEY_COMMA_UP:{get:function(){return b[188]}},KEY_COMMA_PRESS:{get:function(){return b[316]}},KEY_COMMA_DOWN:{get:function(){return b[444]}},KEY_PERIOD_UP:{get:function(){return b[190]}},
KEY_PERIOD_PRESS:{get:function(){return b[318]}},KEY_PERIOD_DOWN:{get:function(){return b[446]}},KEY_SLASH_F_UP:{get:function(){return b[191]}},KEY_SLASH_F_PRESS:{get:function(){return b[319]}},KEY_SLASH_F_DOWN:{get:function(){return b[447]}},KEY_SLASH_B_UP:{get:function(){return b[220]}},KEY_SLASH_B_PRESS:{get:function(){return b[348]}},KEY_SLASH_B_DOWN:{get:function(){return b[476]}},KEY_A_UP:{get:function(){return b[65]}},KEY_A_PRESS:{get:function(){return b[193]}},KEY_A_DOWN:{get:function(){return b[321]}},
KEY_B_UP:{get:function(){return b[66]}},KEY_B_PRESS:{get:function(){return b[194]}},KEY_B_DOWN:{get:function(){return b[322]}},KEY_C_UP:{get:function(){return b[67]}},KEY_C_PRESS:{get:function(){return b[195]}},KEY_C_DOWN:{get:function(){return b[323]}},KEY_D_UP:{get:function(){return b[68]}},KEY_D_PRESS:{get:function(){return b[196]}},KEY_D_DOWN:{get:function(){return b[324]}},KEY_E_UP:{get:function(){return b[69]}},KEY_E_PRESS:{get:function(){return b[197]}},KEY_E_DOWN:{get:function(){return b[325]}},
KEY_F_UP:{get:function(){return b[70]}},KEY_F_PRESS:{get:function(){return b[198]}},KEY_F_DOWN:{get:function(){return b[326]}},KEY_G_UP:{get:function(){return b[71]}},KEY_G_PRESS:{get:function(){return b[199]}},KEY_G_DOWN:{get:function(){return b[327]}},KEY_H_UP:{get:function(){return b[72]}},KEY_H_PRESS:{get:function(){return b[200]}},KEY_H_DOWN:{get:function(){return b[328]}},KEY_I_UP:{get:function(){return b[73]}},KEY_I_PRESS:{get:function(){return b[201]}},KEY_I_DOWN:{get:function(){return b[329]}},
KEY_J_UP:{get:function(){return b[74]}},KEY_J_PRESS:{get:function(){return b[202]}},KEY_J_DOWN:{get:function(){return b[330]}},KEY_K_UP:{get:function(){return b[75]}},KEY_K_PRESS:{get:function(){return b[203]}},KEY_K_DOWN:{get:function(){return b[331]}},KEY_L_UP:{get:function(){return b[76]}},KEY_L_PRESS:{get:function(){return b[204]}},KEY_L_DOWN:{get:function(){return b[332]}},KEY_M_UP:{get:function(){return b[77]}},KEY_M_PRESS:{get:function(){return b[205]}},KEY_M_DOWN:{get:function(){return b[333]}},
KEY_N_UP:{get:function(){return b[78]}},KEY_N_PRESS:{get:function(){return b[206]}},KEY_N_DOWN:{get:function(){return b[334]}},KEY_O_UP:{get:function(){return b[79]}},KEY_O_PRESS:{get:function(){return b[207]}},KEY_O_DOWN:{get:function(){return b[335]}},KEY_P_UP:{get:function(){return b[80]}},KEY_P_PRESS:{get:function(){return b[208]}},KEY_P_DOWN:{get:function(){return b[336]}},KEY_Q_UP:{get:function(){return b[81]}},KEY_Q_PRESS:{get:function(){return b[209]}},KEY_Q_DOWN:{get:function(){return b[337]}},
KEY_R_UP:{get:function(){return b[82]}},KEY_R_PRESS:{get:function(){return b[210]}},KEY_R_DOWN:{get:function(){return b[338]}},KEY_S_UP:{get:function(){return b[83]}},KEY_S_PRESS:{get:function(){return b[211]}},KEY_S_DOWN:{get:function(){return b[339]}},KEY_T_UP:{get:function(){return b[84]}},KEY_T_PRESS:{get:function(){return b[212]}},KEY_T_DOWN:{get:function(){return b[340]}},KEY_U_UP:{get:function(){return b[85]}},KEY_U_PRESS:{get:function(){return b[213]}},KEY_U_DOWN:{get:function(){return b[341]}},
KEY_V_UP:{get:function(){return b[86]}},KEY_V_PRESS:{get:function(){return b[214]}},KEY_V_DOWN:{get:function(){return b[342]}},KEY_W_UP:{get:function(){return b[87]}},KEY_W_PRESS:{get:function(){return b[215]}},KEY_W_DOWN:{get:function(){return b[343]}},KEY_X_UP:{get:function(){return b[88]}},KEY_X_PRESS:{get:function(){return b[216]}},KEY_X_DOWN:{get:function(){return b[344]}},KEY_Y_UP:{get:function(){return b[89]}},KEY_Y_PRESS:{get:function(){return b[217]}},KEY_Y_DOWN:{get:function(){return b[345]}},
KEY_Z_UP:{get:function(){return b[90]}},KEY_Z_PRESS:{get:function(){return b[218]}},KEY_Z_DOWN:{get:function(){return b[346]}},InputUpdate:{value:function(){for(var a=128;256>a;++a)b[a]&&(b[a]=!1)}}})}function I(){var a=0,b=0,c=0;Object.defineProperties(this,{Ambient:{value:function(b){1>a&&(m[0]=new M(b),a++);return m[0]}},Directional:{value:function(a){if(3>b)for(var c=1;4>c;++c)if(void 0===m[c])return m[c]=new N(a),b++,m[c]}},Point:{value:function(a){if(3>c)for(var b=4;12>b;++b)if(void 0===m[b])return m[b]=
new O(a),c++,m[b]}},Remove:{value:function(d){if(d)switch(d.Type){case "AMBIENTLIGHT":m[0]=void 0;--a;break;case "DIRECTIONALLIGHT":for(var e=1;4>e;++e)if(m[e]===d){m[e]=void 0;--b;break}break;case "POINTLIGHT":for(e=4;12>e;++e)if(m[e]===d){m[e]=void 0;--c;break}}}}})}function P(a){a||(a={});q.call(this,a);var b=a.colour instanceof Float32Array?a.colour:new Float32Array(3),c="number"===typeof a.intensity?a.intensity:1;Object.defineProperties(this,{Colour:{get:function(){return b},set:function(a){a instanceof
Float32Array&&3===a.length&&FWGE.Game.Maths.Vector3.Set(b,a)}},Intensity:{get:function(){return c},set:function(a){"number"===typeof a&&(c=Math.clamp(0,255,a))}}})}function M(a){a||(a={});a.type="AMBIENTLIGHT";P.call(this,a)}function N(a){a||(a={});a.type="DIRECTIONALLIGHT";LightObject.call(this,a);var b=a.direction instanceof Float32Array&&3===a.direction.length?a.direction:new Float32Array(3);Object.defineProperties(this,{Direction:{get:function(){return b},set:function(a){a instanceof Float32Array&&
3===a.length&&FWGE.Game.Maths.Vector3.Set(b,a)}},DirectionalUpdate:{value:function(){}}})}function O(a){a||(a={});a.type="POINTLIGHT";LightObject.call(this,a);var b="number"===typeof a.radius?a.radius:5,c="number"===typeof a.angle?a.angle:180;Object.defineProperties(this,{Radius:{get:function(){return b},set:function(a){"number"===typeof a&&(b=a)}},Angle:{get:function(){return c},set:function(a){"number"===typeof a&&(c=Math.clamp(0,180,a))}}})}function J(){Object.defineProperties(this,{Matrix2:{value:new Q},
Matrix3:{value:new R},Matrix4:{value:new S},Vector2:{value:new T},Vector3:{value:new U},Vector4:{value:new V},Quaternion:{value:new W}})}function Q(){Object.defineProperties(this,{Create:{value:function(a,b,c,e){var d=new Float32Array(4);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;d[3]="number"===typeof e?e:a instanceof
Array&&"number"===typeof a[3]?a[3]:0;Object.defineProperties(d,{Type:{value:"MATRIX2"},M11:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},M12:{get:function(){return d[1]},set:function(a){"number"===typeof a&&(d[1]=a)}},M21:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=a)}},M22:{get:function(){return d[3]},set:function(a){"number"===typeof a&&(d[3]=a)}}});return d}},Set:{value:function(a,b,c,e,f){var d;b instanceof Float32Array&&4===a.length?
(d=b[0],c=b[1],e=b[2],b=b[3]):(d=b,b=f);if(a instanceof Float32Array&&4===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof e&&"number"===typeof b)return a[0]=d,a[1]=c,a[2]=e,a[3]=b,a}},Transpose:{value:function(a){if(a instanceof Float32Array&&4===a.length)return this.Set(a,a[0],a[2],a[1],a[3])}},Identity:{value:function(a){return a instanceof Float32Array&&4===a.length?this.Set(a,1,0,0,1):this.Create(1,0,0,1)}},Determinant:{value:function(a){if(a instanceof Float32Array&&4===
a.length)return a[0]*a[3]-a[2]*a[1]}},Inverse:{value:function(a){if(a instanceof Float32Array&&4===a.length){var b=this.Determinant(a);return 0!==b?this.Set(a,a[3]/b,-a[1]/b,-a[2]/b,a[0]/b):a}}},Sum:{value:function(a,b){if(a instanceof Float32Array&&4===a.length&&b instanceof Float32Array&&4===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&4===a.length){if(b instanceof Float32Array&&4===b.length)return this.Set(a,a[0]*
b[0]+a[1]*b[2],a[0]*b[1]+a[1]*b[3],a[2]*b[0]+a[3]*b[2],a[2]*b[1]+a[3]*b[3]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b)}}},RevMult:{value:function(a,b){if(a instanceof Float32Array&&4===a.length&&b instanceof Float32Array&&4===b.length)return this.Set(a,b[0]*a[0]+b[1]*a[2],b[0]*a[1]+b[1]*a[3],b[2]*a[0]+b[3]*a[2],b[2]*a[1]+b[3]*a[3])}}})}function R(){Object.defineProperties(this,{Create:{value:function(a,b,c,e,f,h,g,k,l){var d=new Float32Array(9);d[0]="number"===typeof a?
a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;d[3]="number"===typeof e?e:a instanceof Array&&"number"===typeof a[3]?a[3]:0;d[4]="number"===typeof f?f:a instanceof Array&&"number"===typeof a[4]?a[4]:0;d[5]="number"===typeof h?h:a instanceof Array&&"number"===typeof a[5]?a[5]:0;d[6]="number"===typeof g?g:a instanceof Array&&"number"===typeof a[6]?
a[6]:0;d[7]="number"===typeof k?k:a instanceof Array&&"number"===typeof a[7]?a[7]:0;d[8]="number"===typeof l?l:a instanceof Array&&"number"===typeof a[8]?a[8]:0;Object.defineProperties(d,{Type:{value:"MATRIX3"},M11:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},M12:{get:function(){return d[1]},set:function(a){"number"===typeof a&&(d[1]=a)}},M13:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=a)}},M21:{get:function(){return d[3]},set:function(a){"number"===
typeof a&&(d[3]=a)}},M22:{get:function(){return d[4]},set:function(a){"number"===typeof a&&(d[4]=a)}},M23:{get:function(){return d[5]},set:function(a){"number"===typeof a&&(d[5]=a)}},M31:{get:function(){return d[6]},set:function(a){"number"===typeof a&&(d[6]=a)}},M32:{get:function(){return d[7]},set:function(a){"number"===typeof a&&(d[7]=a)}},M33:{get:function(){return d[8]},set:function(a){"number"===typeof a&&(d[8]=a)}}});return d}},Set:{value:function(a,b,c,e,f,h,g,k,l,r){var d;b instanceof Float32Array&&
9===a.length?(d=b[0],c=b[1],e=b[2],f=b[3],h=b[4],g=b[5],k=b[6],l=b[7],b=b[8]):(d=b,b=r);if(a instanceof Float32Array&&9===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof e&&"number"===typeof f&&"number"===typeof h&&"number"===typeof g&&"number"===typeof k&&"number"===typeof l&&"number"===typeof b)return a[0]=d,a[1]=c,a[2]=e,a[3]=f,a[4]=h,a[5]=g,a[6]=k,a[7]=l,a[8]=b,a}},Transpose:{value:function(a){if(a instanceof Float32Array&&9===a.length)return this.Set(a,a[0],a[3],a[6],a[1],
a[4],a[7],a[2],a[5],a[8])}},Identity:{value:function(a){return a instanceof Float32Array&&9===a.length?this.Set(a,1,0,0,0,1,0,0,0,1):this.Create(1,0,0,0,1,0,0,0,1)}},Determinant:{value:function(a){if(a instanceof Float32Array&&9===a.length)return a[0]*(a[4]*a[8]-a[5]*a[7])-a[1]*(a[3]*a[8]-a[5]*a[6])+a[2]*(a[3]*a[7]-a[4]*a[6])}},Inverse:{value:function(a){if(a instanceof Float32Array&&9===a.length){var b=this.Determinant(a);return 0!==b?this.Set(a,(a[4]*a[8]-a[7]*a[5])/b,-(a[1]*a[8]-a[7]*a[2])/b,(a[1]*
a[5]-a[4]*a[2])/b,-(a[3]*a[8]-a[6]*a[5])/b,(a[0]*a[8]-a[6]*a[2])/b,-(a[0]*a[5]-a[3]*a[2])/b,(a[3]*a[7]-a[6]*a[4])/b,-(a[0]*a[7]-a[6]*a[1])/b,(a[0]*a[4]-a[3]*a[1])/b):a}}},Sum:{value:function(a,b){if(a instanceof Float32Array&&9===a.length&&b instanceof Float32Array&&9===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3],a[4]+b[4],a[5]+b[5],a[6]+b[6],a[7]+b[7],a[8]+b[8])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&9===a.length){if(b instanceof Float32Array&&9===b.length)return this.Set(a,
a[0]*b[0]+a[1]*b[3]+a[2]*b[6],a[0]*b[1]+a[1]*b[4]+a[2]*b[7],a[0]*b[2]+a[1]*b[5]+a[2]*b[8],a[3]*b[0]+a[4]*b[3]+a[5]*b[6],a[3]*b[1]+a[4]*b[4]+a[5]*b[7],a[3]*b[2]+a[4]*b[5]+a[5]*b[8],a[6]*b[0]+a[7]*b[3]+a[8]*b[6],a[6]*b[1]+a[7]*b[4]+a[8]*b[7],a[6]*b[2]+a[7]*b[5]+a[8]*b[8]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*b,a[5]*b,a[6]*b,a[7]*b,a[8]*b)}}},RevMult:{value:function(a,b){if(a instanceof Float32Array&&9===a.length&&b instanceof Float32Array&&9===b.length)return this.Set(b,
a[0]*b[0]+a[1]*b[3]+a[2]*b[6],a[0]*b[1]+a[1]*b[4]+a[2]*b[7],a[0]*b[2]+a[1]*b[5]+a[2]*b[8],a[3]*b[0]+a[4]*b[3]+a[5]*b[6],a[3]*b[1]+a[4]*b[4]+a[5]*b[7],a[3]*b[2]+a[4]*b[5]+a[5]*b[8],a[6]*b[0]+a[7]*b[3]+a[8]*b[6],a[6]*b[1]+a[7]*b[4]+a[8]*b[7],a[6]*b[2]+a[7]*b[5]+a[8]*b[8])}}})}function S(){Object.defineProperties(this,{Create:{value:function(a,b,c,e,f,h,g,k,l,r,m,w,n,p,q,t){var d=new Float32Array(16);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?
b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;d[3]="number"===typeof e?e:a instanceof Array&&"number"===typeof a[3]?a[3]:0;d[4]="number"===typeof f?f:a instanceof Array&&"number"===typeof a[4]?a[4]:0;d[5]="number"===typeof h?h:a instanceof Array&&"number"===typeof a[5]?a[5]:0;d[6]="number"===typeof g?g:a instanceof Array&&"number"===typeof a[6]?a[6]:0;d[7]="number"===typeof k?k:a instanceof Array&&"number"===typeof a[7]?
a[7]:0;d[8]="number"===typeof l?l:a instanceof Array&&"number"===typeof a[8]?a[8]:0;d[9]="number"===typeof r?r:a instanceof Array&&"number"===typeof a[9]?a[9]:0;d[10]="number"===typeof m?m:a instanceof Array&&"number"===typeof a[10]?a[10]:0;d[11]="number"===typeof w?w:a instanceof Array&&"number"===typeof a[11]?a[11]:0;d[12]="number"===typeof n?n:a instanceof Array&&"number"===typeof a[12]?a[12]:0;d[13]="number"===typeof p?p:a instanceof Array&&"number"===typeof a[13]?a[13]:0;d[14]="number"===typeof q?
q:a instanceof Array&&"number"===typeof a[14]?a[14]:0;d[15]="number"===typeof t?t:a instanceof Array&&"number"===typeof a[15]?a[15]:0;Object.defineProperties(d,{Type:{value:"MATRIX4"},M11:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},M12:{get:function(){return d[1]},set:function(a){"number"===typeof a&&(d[1]=a)}},M13:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=a)}},M14:{get:function(){return d[3]},set:function(a){"number"===typeof a&&(d[3]=
a)}},M21:{get:function(){return d[4]},set:function(a){"number"===typeof a&&(d[4]=a)}},M22:{get:function(){return d[5]},set:function(a){"number"===typeof a&&(d[5]=a)}},M23:{get:function(){return d[6]},set:function(a){"number"===typeof a&&(d[6]=a)}},M24:{get:function(){return d[7]},set:function(a){"number"===typeof a&&(d[7]=a)}},M31:{get:function(){return d[8]},set:function(a){"number"===typeof a&&(d[8]=a)}},M32:{get:function(){return d[9]},set:function(a){"number"===typeof a&&(d[9]=a)}},M33:{get:function(){return d[10]},
set:function(a){"number"===typeof a&&(d[10]=a)}},M34:{get:function(){return d[11]},set:function(a){"number"===typeof a&&(d[11]=a)}},M41:{get:function(){return d[12]},set:function(a){"number"===typeof a&&(d[12]=a)}},M42:{get:function(){return d[13]},set:function(a){"number"===typeof a&&(d[13]=a)}},M43:{get:function(){return d[14]},set:function(a){"number"===typeof a&&(d[14]=a)}},M44:{get:function(){return d[15]},set:function(a){"number"===typeof a&&(d[15]=a)}}});return d}},Set:{value:function(a,b,
c,e,f,h,g,k,l,r,m,w,n,p,q,t,u){var d;b instanceof Float32Array&&16===a.length?(d=b[0],c=b[1],e=b[2],f=b[3],h=b[4],g=b[5],k=b[6],l=b[7],r=b[8],m=b[9],w=b[10],n=b[11],p=b[12],q=b[13],t=b[14],b=b[15]):(d=b,b=u);if(a instanceof Float32Array&&16===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof e&&"number"===typeof f&&"number"===typeof h&&"number"===typeof g&&"number"===typeof k&&"number"===typeof l&&"number"===typeof r&&"number"===typeof m&&"number"===typeof w&&"number"===typeof n&&
"number"===typeof p&&"number"===typeof q&&"number"===typeof t&&"number"===typeof b)return a[0]=d,a[1]=c,a[2]=e,a[3]=f,a[4]=h,a[5]=g,a[6]=k,a[7]=l,a[8]=r,a[9]=m,a[10]=w,a[11]=n,a[12]=p,a[13]=q,a[14]=t,a[15]=b,a}},Transpose:{value:function(){if(arguments[0]instanceof Float32Array&&16===arguments[0].length)return this.Set(arguments[0],arguments[0][0],arguments[0][4],arguments[0][8],arguments[0][12],arguments[0][1],arguments[0][5],arguments[0][9],arguments[0][13],arguments[0][2],arguments[0][6],arguments[0][10],
arguments[0][14],arguments[0][3],arguments[0][7],arguments[0][11],arguments[0][15]);Error("TRANSPOSE",arguments)}},Identity:{value:function(a){return a instanceof Float32Array&&16===a.length?this.Set(a,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1):this.Create(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}},Determinant:{value:function(a){if(a instanceof Float32Array&&16===a.length)return a[0]*a[5]*a[10]*a[15]+a[0]*a[6]*a[11]*a[13]+a[0]*a[7]*a[9]*a[14]+a[1]*a[4]*a[11]*a[14]+a[1]*a[6]*a[8]*a[15]+a[1]*a[7]*a[10]*a[12]+a[2]*a[4]*
a[9]*a[15]+a[2]*a[5]*a[11]*a[12]+a[2]*a[7]*a[8]*a[13]+a[3]*a[4]*a[10]*a[13]+a[3]*a[5]*a[8]*a[14]+a[3]*a[6]*a[9]*a[12]-a[0]*a[5]*a[11]*a[14]-a[0]*a[6]*a[9]*a[15]-a[0]*a[7]*a[10]*a[13]-a[1]*a[4]*a[10]*a[15]-a[1]*a[6]*a[11]*a[12]-a[1]*a[7]*a[8]*a[14]-a[2]*a[4]*a[11]*a[13]-a[2]*a[5]*a[8]*a[15]-a[2]*a[7]*a[9]*a[12]-a[3]*a[4]*a[9]*a[14]-a[3]*a[5]*a[10]*a[12]-a[3]*a[6]*a[8]*a[13]}},Inverse:{value:function(a){if(a instanceof Float32Array&&16===a.length){var b=this.Determinant(a);return 0!==b?this.Set(a,(a[5]*
a[10]*a[15]+a[6]*a[11]*a[13]+a[7]*a[9]*a[14]-a[5]*a[11]*a[14]-a[6]*a[9]*a[15]-a[7]*a[10]*a[13])/b,(a[1]*a[11]*a[14]+a[2]*a[9]*a[15]+a[3]*a[10]*a[13]-a[1]*a[10]*a[15]-a[2]*a[11]*a[13]-a[3]*a[9]*a[14])/b,(a[1]*a[6]*a[15]+a[2]*a[7]*a[13]+a[3]*a[5]*a[14]-a[1]*a[7]*a[14]-a[2]*a[5]*a[15]-a[3]*a[6]*a[13])/b,(a[1]*a[7]*a[10]+a[2]*a[5]*a[11]+a[3]*a[6]*a[9]-a[1]*a[6]*a[11]-a[2]*a[7]*a[9]-a[3]*a[5]*a[10])/b,(a[4]*a[11]*a[14]+a[6]*a[8]*a[15]+a[7]*a[10]*a[12]-a[4]*a[10]*a[15]-a[6]*a[11]*a[12]-a[7]*a[8]*a[14])/
b,(a[0]*a[10]*a[15]+a[2]*a[11]*a[12]+a[3]*a[8]*a[14]-a[0]*a[11]*a[14]-a[2]*a[8]*a[15]-a[3]*a[10]*a[12])/b,(a[0]*a[7]*a[14]+a[2]*a[4]*a[15]+a[3]*a[6]*a[12]-a[0]*a[6]*a[15]-a[2]*a[7]*a[12]-a[3]*a[4]*a[14])/b,(a[0]*a[6]*a[11]+a[2]*a[7]*a[8]+a[3]*a[4]*a[10]-a[0]*a[7]*a[10]-a[2]*a[4]*a[11]-a[3]*a[6]*a[8])/b,(a[4]*a[9]*a[15]+a[5]*a[11]*a[12]+a[7]*a[8]*a[13]-a[4]*a[11]*a[13]-a[5]*a[8]*a[15]-a[7]*a[9]*a[12])/b,(a[0]*a[11]*a[13]+a[1]*a[8]*a[15]+a[3]*a[9]*a[12]-a[0]*a[9]*a[15]-a[1]*a[11]*a[12]-a[3]*a[8]*a[13])/
b,(a[0]*a[5]*a[15]+a[1]*a[7]*a[12]+a[3]*a[4]*a[13]-a[0]*a[7]*a[13]-a[1]*a[4]*a[15]-a[3]*a[5]*a[12])/b,(a[0]*a[7]*a[9]+a[1]*a[4]*a[11]+a[3]*a[5]*a[8]-a[0]*a[5]*a[11]-a[1]*a[7]*a[8]-a[3]*a[4]*a[9])/b,(a[4]*a[10]*a[13]+a[5]*a[8]*a[14]+a[6]*a[9]*a[12]-a[4]*a[9]*a[14]-a[5]*a[10]*a[12]-a[6]*a[8]*a[13])/b,(a[0]*a[9]*a[14]+a[1]*a[10]*a[12]+a[2]*a[8]*a[13]-a[0]*a[10]*a[13]-a[1]*a[8]*a[14]-a[2]*a[9]*a[12])/b,(a[0]*a[6]*a[13]+a[1]*a[4]*a[14]+a[2]*a[5]*a[12]-a[0]*a[5]*a[14]-a[1]*a[6]*a[12]-a[2]*a[4]*a[13])/b,
(a[0]*a[5]*a[10]+a[1]*a[6]*a[8]+a[2]*a[4]*a[9]-a[0]*a[6]*a[9]-a[1]*a[4]*a[10]-a[2]*a[5]*a[8])/b):a}}},Sum:{value:function(a,b){if(a instanceof Float32Array&&16===a.length&&b instanceof Float32Array&&16===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3],a[4]+b[4],a[5]+b[5],a[6]+b[6],a[7]+b[7],a[8]+b[8],a[9]+b[9],a[10]+b[10],a[11]+b[11],a[12]+b[12],a[13]+b[13],a[14]+b[14],a[15]+b[15])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&16===a.length){if(b instanceof Float32Array&&
16===b.length)return this.Set(a,a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+
a[9]*b[7]+a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*b,a[5]*b,a[6]*b,a[7]*b,a[8]*b,a[9]*b,a[10]*b,a[11]*b,a[12]*b,a[13]*b,a[14]*b,a[15]*b)}}},RevMult:{value:function(a,b){if(a instanceof Float32Array&&9===a.length&&b instanceof Float32Array&&16===b.length)return this.Set(b,
a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],
a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15])}}})}function W(){}function T(){Object.defineProperties(this,{Create:{value:function(a,b){var c=new Float32Array(2);c[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;c[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;Object.defineProperties(c,{Type:{value:"VECTOR2"},
X:{get:function(){return c[0]},set:function(a){"number"===typeof a&&(c[0]=a)}},Y:{get:function(){return c[1]},set:function(a){"number"===typeof a&&(c[1]=a)}}});return c}},Set:{value:function(a,b,c){var d;b instanceof Float32Array&&2===a.length?(d=b[0],b=b[1]):(d=b,b=c);if(a instanceof Float32Array&&2===a.length&&"number"===typeof d&&"number"===typeof b&&"number"===typeof z)return a[0]=d,a[1]=b,a}},Length:{value:function(a){if(a instanceof Float32Array&&2===a.length)return Math.sqrt(a[0]*a[0]+a[1]*
a[1])}},Sum:{value:function(a,b){if(a instanceof Float32Array&&2===a.length&&b instanceof Float32Array&&2===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1])}},Diff:{value:function(a,b){if(a instanceof Float32Array&&2===a.length&&b instanceof Float32Array&&2===b.length)return this.Create(b[0]-a[0],b[1]-a[1])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&2===a.length){if(b instanceof Float32Array&&2===b.length)return this.Set(a,a[0]*b[0],a[1]*b[1]);if("number"===typeof b)return this.Set(a,
a[0]*b,a[1]*b)}}},Dot:{value:function(a,b){if(a instanceof Float32Array&&2===a.length&&b instanceof Float32Array&&2===b.length)return a[0]*b[0]+a[1]*b[1]}},Unit:{value:function(a){if(a instanceof Float32Array&&2===a.length){var b=this.Length(a);if(0!==b)return this.Mult(a,1/b)}}},Cross:{value:function(a,b){if(a instanceof Float32Array&&2===a.length&&b instanceof Float32Array&&2===b.length)return this.Create(a[1]*b[2]+a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]+a[1]*b[0])}}})}function U(){Object.defineProperties(this,
{Create:{value:function(a,b,c){var d=new Float32Array(3);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;Object.defineProperties(d,{Type:{value:"VECTOR3"},X:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},Y:{get:function(){return d[1]},set:function(a){"number"===typeof a&&(d[1]=a)}},Z:{get:function(){return d[2]},
set:function(a){"number"===typeof a&&(d[2]=a)}}});return d}},Set:{value:function(a,b,c,e){var d;b instanceof Float32Array&&3===a.length?(d=b[0],c=b[1],b=b[2]):(d=b,b=e);if(a instanceof Float32Array&&3===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof b)return a[0]=d,a[1]=c,a[2]=b,a}},Length:{value:function(a){if(a instanceof Float32Array&&3===a.length)return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}},Sum:{value:function(a,b,c){if(a instanceof Float32Array&&3===a.length&&c instanceof
Float32Array&&3===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2])}},Diff:{value:function(a,b,c){if(a instanceof Float32Array&&3===a.length&&c instanceof Float32Array&&3===b.length)return this.Create(b[0]-a[0],b[1]-a[1],b[2]-a[2])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&3===a.length){if(b instanceof Float32Array&&3===b.length)return this.Set(a,a[0]*b[0],a[1]*b[1],a[2]*b[2]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b)}}},Dot:{value:function(a,b){if(a instanceof
Float32Array&&3===a.length&&b instanceof Float32Array&&3===b.length)return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}},Unit:{value:function(a){if(a instanceof Float32Array&&3===a.length){var b=this.Length(a);if(0!==b)return this.Mult(a,1/b)}}},Cross:{value:function(a,b){if(a instanceof Float32Array&&3===a.length&&b instanceof Float32Array&&3===b.length)return this.Create(a[1]*b[2]+a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]+a[1]*b[0])}}})}function V(){Object.defineProperties(this,{Create:{value:function(a,b,c,e){var d=
new Float32Array(4);d[0]="number"===typeof a?a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;d[3]="number"===typeof e?e:a instanceof Array&&"number"===typeof a[3]?a[3]:0;Object.defineProperties(d,{Type:{value:"VECTOR4"},W:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=a)}},X:{get:function(){return d[1]},set:function(a){"number"===
typeof a&&(d[1]=a)}},Y:{get:function(){return d[2]},set:function(a){"number"===typeof a&&(d[2]=a)}},Z:{get:function(){return d[3]},set:function(a){"number"===typeof a&&(d[3]=a)}}});return d}},Set:{value:function(a,b,c,e,f){var d;b instanceof Float32Array&&4===a.length?(d=b[0],c=b[1],e=b[2],b=b[3]):(d=b,b=f);if(a instanceof Float32Array&&4===a.length&&"number"===typeof d&&"number"===typeof c&&"number"===typeof e&&"number"===typeof b)return a[0]=d,a[1]=c,a[2]=e,a[3]=b,a}},Length:{value:function(a){if(a instanceof
Float32Array&&4===a.length)return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}},Sum:{value:function(a,b,c){if(a instanceof Float32Array&&4===a.length&&c instanceof Float32Array&&4===b.length)return this.Set(a,a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3])}},Diff:{value:function(a,b,c){if(a instanceof Float32Array&&4===a.length&&c instanceof Float32Array&&4===b.length)return this.Create(b[0]-a[0],b[1]-a[1],b[2]-a[2],b[3]-a[3])}},Mult:{value:function(a,b){if(a instanceof Float32Array&&4===a.length){if(b instanceof
Float32Array&&3===b.length)return this.Set(a,a[0]*b[0],a[1]*b[1],a[2]*b[2],a[3]*b[3]);if("number"===typeof b)return this.Set(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b)}}},Dot:{value:function(a,b){if(a instanceof Float32Array&&4===a.length&&b instanceof Float32Array&&4===b.length)return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}},Unit:{value:function(a){if(a instanceof Float32Array&&4===a.length){var b=this.Length(a);if(0!==b)return this.Mult(a,1/b)}}}})}function A(a){a||(a={});a.type="PARTICLESYSTEM";q.call(this,
a)}function X(){Object.defineProperties(this,{Collision:{value:Y},PhysicsBody:{value:Z},PhysicsMaterial:{value:aa},Gravity:{value:-9.8},Init:{value:function(){}},PhysicsUpdate:{value:function(){}}})}function v(a){a||(a={});q.call(this,a)}function aa(){}function Z(a){a&&(a={});a.type="PHYSICSBODY";v.call(this,a);var b="number"===typeof a.mass?a.mass:1,c="boolean"===typeof a.lockx?a.lockx:!1,e="boolean"===typeof a.locky?a.locky:!1,f="boolean"===typeof a.lockz?a.lockz:!1;Object.defineProperties(this,
{Mass:{get:function(){return b},set:function(a){"number"===typeof a&&0<=a&&(b=a)}},LockX:{get:function(){return c},set:function(a){"boolean"===typeof a&&(c=a)}},LockY:{get:function(){return e},set:function(a){"boolean"===typeof a&&(e=a)}},LockZ:{get:function(){return f},set:function(a){"boolean"===typeof a&&(f=a)}}})}function Y(a){a||(a={});a.type="COLLISION";v.call(this,a);var b=a.parent instanceof v?a.parent:void 0;Object.defineProperties(this,{PhysicsItem:{get:function(){return b},set:function(){if(arguments[0]instanceof
v||void 0===arguments)b=arguments[0]}}})}function ba(){var a;Object.defineProperties(this,{Colour:{value:new ca},Mesh:{value:B},RenderMaterial:{value:x},Shader:{value:C},Init:{value:function(){a=new da;c.enable(c.DEPTH_TEST)}},RenderUpdate:{value:function(){a.Render()}}})}function C(a){a||(a={});if(a.name&&"string"===typeof a.name&&a.vertexShader&&"string"===typeof a.vertexShader&&a.fragmentShader&&"string"===typeof a.fragmentShader){"number"!==typeof a.width&&(a.width=512);"number"!==typeof a.height&&
(a.height=512);Object.defineProperties(this,{Name:{value:a.name},Program:{value:c.createProgram()},Texture:{value:c.createTexture()},FrameBuffer:{value:c.createFramebuffer()},RenderBuffer:{value:c.createRenderbuffer()}});c.bindFramebuffer(c.FRAMEBUFFER,this.FrameBuffer);c.bindRenderbuffer(c.RENDERBUFFER,this.RenderBuffer);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,1024,768);c.bindTexture(c.TEXTURE_2D,this.Texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1024,768,0,c.RGBA,c.UNSIGNED_BYTE,null);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.Texture,0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,this.RenderBuffer);c.bindTexture(c.TEXTURE_2D,null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,
null);var b=c.createShader(c.VERTEX_SHADER);c.shaderSource(b,a.vertexShader);c.compileShader(b);if(c.getShaderParameter(b,c.COMPILE_STATUS)){var d=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(d,a.fragmentShader);c.compileShader(d);c.getShaderParameter(d,c.COMPILE_STATUS)?(c.attachShader(this.Program,b),c.attachShader(this.Program,d),c.linkProgram(this.Program),c.getProgramParameter(this.Program,c.LINK_STATUS)&&(c.useProgram(this.Program),Object.defineProperties(this,{Attributes:{value:{Position:c.getAttribLocation(this.Program,
"A_Position"),Colour:c.getAttribLocation(this.Program,"A_Colour"),UV:c.getAttribLocation(this.Program,"A_UV"),Normal:c.getAttribLocation(this.Program,"A_Normal")}},Uniforms:{value:{Material:{Ambient:c.getUniformLocation(this.Program,"U_Material.Ambient"),Diffuse:c.getUniformLocation(this.Program,"U_Material.Diffuse"),Specular:c.getUniformLocation(this.Program,"U_Material.Specular"),Shininess:c.getUniformLocation(this.Program,"U_Material.Shininess"),Alpha:c.getUniformLocation(this.Program,"U_Material.Alpha")},
Matrix:{ModelView:c.getUniformLocation(this.Program,"U_Matrix.ModelView"),Projection:c.getUniformLocation(this.Program,"U_Matrix.Projection"),Normal:c.getUniformLocation(this.Program,"U_Matrix.Normal")},Light:{Ambient:{Colour:c.getUniformLocation(this.Program,"U_Ambient.Colour"),Intensity:c.getUniformLocation(this.Program,"U_Ambient.Intensity")},Directional:{Colour:c.getUniformLocation(this.Program,"U_Directional.Colour"),Intensity:c.getUniformLocation(this.Program,"U_Directional.Intensity"),Direction:c.getUniformLocation(this.Program,
"U_Directional.Direction")},Point:[{Colour:c.getUniformLocation(this.Program,"U_Point[0].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[0].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[0].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[0].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[0].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[1].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[1].Intensity"),Position:c.getUniformLocation(this.Program,
"U_Point[1].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[1].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[1].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[2].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[2].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[2].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[2].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[2].Angle")},{Colour:c.getUniformLocation(this.Program,
"U_Point[3].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[3].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[3].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[3].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[3].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[4].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[4].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[4].Position"),Radius:c.getUniformLocation(this.Program,
"U_Point[4].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[4].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[5].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[5].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[5].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[5].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[5].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[6].Colour"),Intensity:c.getUniformLocation(this.Program,
"U_Point[6].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[6].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[6].Radius"),Angle:c.getUniformLocation(this.Program,"U_Point[6].Angle")},{Colour:c.getUniformLocation(this.Program,"U_Point[7].Colour"),Intensity:c.getUniformLocation(this.Program,"U_Point[7].Intensity"),Position:c.getUniformLocation(this.Program,"U_Point[7].Position"),Radius:c.getUniformLocation(this.Program,"U_Point[7].Radius"),Angle:c.getUniformLocation(this.Program,
"U_Point[7].Angle")}],PointCount:c.getUniformLocation(this.Program,"U_Point_Count")},Sampler:{Image:c.getUniformLocation(this.Program,"U_Sampler.Image"),Bump:c.getUniformLocation(this.Program,"U_Sampler.Bump")}}}}),c.useProgram(null),t.push(this))):console.error(Error("Fragment Shader: "+c.getShaderInfoLog(d)))}else console.error(Error("Vertex Shader: "+c.getShaderInfoLog(b)))}}function ca(){Object.defineProperties(this,{Create:{value:function(a,b,c){var d=new Float32Array(3);d[0]="number"===typeof a?
a:a instanceof Array&&"number"===typeof a[0]?a[0]:0;d[1]="number"===typeof b?b:a instanceof Array&&"number"===typeof a[1]?a[1]:0;d[2]="number"===typeof c?c:a instanceof Array&&"number"===typeof a[2]?a[2]:0;Object.defineProperties(d,{Type:{value:"COLOUR"},R:{get:function(){return d[0]},set:function(a){"number"===typeof a&&(d[0]=Math.clamp(a,0,1))}},G:{get:function(){return d[1]},set:function(a,b){"number"===typeof b&&(d[1]=Math.clamp(a,0,1))}},B:{get:function(){return d[2]},set:function(a){"number"===
typeof a&&(d[2]=Math.clamp(a,0,1))}}});return d}}})}function B(a){function b(a,b){for(var c=a.length;0<--c;)if("number"!==typeof a[c])return;return new b(a)}a||(a={});a.type="MESH";q.call(this,a);a.position=b(a.position,Float32Array);a.uvs=b(a.uvs,Float32Array);a.colours=b(a.colours,Float32Array);a.normals=b(a.normals,Float32Array);a.indices=b(a.indices,Uint16Array);Object.defineProperties(this,{PositionBuffer:{value:c.createBuffer()},UVBuffer:{value:c.createBuffer()},ColourBuffer:{value:c.createBuffer()},
NormalBuffer:{value:c.createBuffer()},IndexBuffer:{value:c.createBuffer()},VertexCount:{value:a.indices?a.indices.length:0}});a.position&&(c.bindBuffer(c.ARRAY_BUFFER,this.PositionBuffer),c.bufferData(c.ARRAY_BUFFER,a.position,c.STATIC_DRAW));a.uvs&&(c.bindBuffer(c.ARRAY_BUFFER,this.UVBuffer),c.bufferData(c.ARRAY_BUFFER,a.uvs,c.STATIC_DRAW));a.colours&&(c.bindBuffer(c.ARRAY_BUFFER,this.ColourBuffer),c.bufferData(c.ARRAY_BUFFER,a.colours,c.STATIC_DRAW));a.normals&&(c.bindBuffer(c.ARRAY_BUFFER,this.NormalBuffer),
c.bufferData(c.ARRAY_BUFFER,a.normals,c.STATIC_DRAW));a.indices&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.IndexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.indices,c.STATIC_DRAW));ea.push(this)}function x(a){function b(a){a&&a instanceof Array||(a=[0,0,0]);switch(a.length){case 0:a.position[0]=0;case 1:a.position[1]=0;case 2:a.position[2]=0}return FWGE.Render.Colour.Create(a)}a||(a={});a.type="MATERIAL";D.call(this,a);var c=b(a.ambient),e=b(a.diffuse),f=b(a.specular),h="number"===typeof a.alpha&&
0<=a.alpha?a.alpha:1,g="number"===typeof a.shininess&&0<=a.shininess?a.shininess:5,k=a.shader instanceof C?a.shader:void 0,l=void 0,m=void 0,n=void 0;Object.defineProperties(this,{Ambient:{get:function(){return c},set:function(a){"COLOUR"===a.Type&&FWGE.Game.Maths.Vector3.Set(c,a)}},Diffuse:{get:function(){return e},set:function(a){"COLOUR"===a.Type&&FWGE.Game.Maths.Vector3.Set(e,a)}},Specular:{get:function(){return f},set:function(a){"COLOUR"===a.Type&&FWGE.Game.Maths.Vector3.Set(f,a)}},Alpha:{get:function(){return h},
set:function(a){"number"===typeof a&&(h=a)}},Shininess:{get:function(){return g},set:function(a){"number"===typeof a&&(g=a)}},Shader:{get:function(){return k},set:function(a){a instanceof C&&(k=a)}},ImageMap:{get:function(){return l},set:function(a){if(a instanceof WebGLTexture||void 0===a)l=a}},BumpMap:{get:function(){return m},set:function(a){if(a instanceof WebGLTexture||void 0===a)m=a}},SpecularMap:{get:function(){return n},set:function(a){if(a instanceof WebGLTexture||void 0===a)n=a}}});fa.push(this)}
function ga(){var a=[];Object.defineProperties(this,{PushMatrix:{value:function(){var b=this.PeekMatrix();a.push(FWGE.Game.Maths.Matrix4.Create(b.M11,b.M12,b.M13,b.M14,b.M21,b.M22,b.M23,b.M24,b.M31,b.M32,b.M33,b.M34,b.M41,b.M42,b.M43,b.M44))}},PeekMatrix:{value:function(){return 0===a.length?FWGE.Game.Maths.Matrix4.Identity():a[a.length-1]}},PopMatrix:{value:function(){return a.pop()}},Transform:{value:function(a){FWGE.Game.Maths.Matrix4.Set(this.PeekMatrix(),this.Shear(this.Scale(this.Rotate(this.Translate(this.PeekMatrix(),
a.Position),a.Rotation),a.Scale),a.Shear))}},Translate:{value:function(a,c){return FWGE.Game.Maths.Matrix4.Create(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[0]*c[0]+a[4]*c[1]+a[8]*c[2]+a[12],a[1]*c[0]+a[5]*c[1]+a[9]*c[2]+a[13],a[2]*c[0]+a[6]*c[1]+a[10]*c[2]+a[14],a[3]*c[0]+a[7]*c[1]+a[11]*c[2]+a[15])}},RotateAround:{value:function(){}},Rotate:{value:function(a,c){return FWGE.Game.Maths.Matrix4.Mult(FWGE.Game.Maths.Matrix4.Create(1,0,0,0,0,Math.cos(c[0]),-Math.sin(c[0]),0,0,Math.sin(c[0]),
Math.cos(c[0]),0,0,0,0,1),FWGE.Game.Maths.Matrix4.Mult(FWGE.Game.Maths.Matrix4.Create(Math.cos(c[1]),0,Math.sin(c[1]),0,0,1,0,0,-Math.sin(c[1]),0,Math.cos(c[1]),0,0,0,0,1),FWGE.Game.Maths.Matrix4.Mult(FWGE.Game.Maths.Matrix4.Create(Math.cos(c[2]),-Math.sin(c[2]),0,0,Math.sin(c[2]),Math.cos(c[2]),0,0,0,0,1,0,0,0,0,1),a)))}},Scale:{value:function(a,c){return FWGE.Game.Maths.Matrix4.Create(a[0]*c[0],a[1]*c[0],a[2]*c[0],a[3]*c[0],a[4]*c[1],a[5]*c[1],a[6]*c[1],a[7]*c[1],a[8]*c[2],a[9]*c[2],a[10]*c[2],
a[11]*c[2],a[12],a[13],a[14],a[15],a[12],a[13],a[14],a[15])}},Shear:{value:function(a,c){var b=Math.radian(c[0]),d=Math.radian(c[1]);c=Math.radian(c[2]);return FWGE.Game.Maths.Matrix4.Mult(FWGE.Game.Maths.Matrix4.Create(1,0,Math.tan(c),0,Math.tan(b),1,0,0,0,Math.tan(d),1,0,0,0,0,1),a)}}})}function ha(){var a=FWGE.Game.Maths.Matrix4.Identity();Object.defineProperties(this,{ProjectionUpdate:{value:function(){switch(FWGE.Game.Camera.Mode){case FWGE.Game.Camera.PERSPECTIVE:var b=FWGE.Game.Camera.Aspect,
c=FWGE.Game.Camera.Near,e=FWGE.Game.Camera.Far,f=c*Math.tan(Math.radian(FWGE.Game.Camera.FOV)),b=f*b,h=-b,g=-f,k=b-h,l=f-g,m=e-c;FWGE.Game.Maths.Matrix4.Set(a,2*c/k,0,0,0,0,2*c/l,0,0,(b+h)/k,(f+g)/l,-(e+c)/m,-1,0,0,-(2*e*c)/m,1);break;case FWGE.Game.Camera.ORTHOGRAPHIC:c=FWGE.Game.Camera.Left,e=FWGE.Game.Camera.Right,f=FWGE.Game.Camera.Top,b=FWGE.Game.Camera.Bottom,h=FWGE.Game.Camera.Near,g=FWGE.Game.Camera.Far,k=FWGE.Game.Camera.Theta,l=FWGE.Game.Camera.Phi,k=Math.cot(Math.radian(k)),l=Math.cot(Math.radian(l)),
c-=h*k,e-=h*k,f-=h*l,b-=h*l,FWGE.Game.Maths.Matrix4.Set(a,2/(e-c),0,0,0,0,2/(f-b),0,0,k,l,-2/(g-h),0,-(c+e)/(e-c),-(f+b)/(f-b),-(g+h)/(g-h),1)}}},GetViewer:{value:function(){return a}}})}function da(){var a=new ga,b=new ha;Object.defineProperties(this,{Render:{value:function(){this.ClearBuffers();for(var a=n.length;0<=--a;)this.SetGlobalUniforms(),this.RenderObject(n[a])}},ClearBuffers:{value:function(){for(var a=t.length;0<=--a;)c.bindFramebuffer(c.FRAMEBUFFER,t[a].FrameBuffer),c.viewport(0,0,c.drawingBufferWidth,
c.drawingBufferHeight),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.bindFramebuffer(c.FRAMEBUFFER,null);c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)}},RenderObject:{value:function(b){a.PushMatrix();a.Transform(b.Transform);for(var d=b.Children.length;0<=--d;)this.RenderObject(b.Children[d]);b.Mesh&&b.RenderMaterial&&(d=b.RenderMaterial.Shader,c.useProgram(d.Program),c.enableVertexAttribArray(d.Attributes.Position),-1!==d.Attributes.Normal&&
c.enableVertexAttribArray(d.Attributes.Normal),-1!==d.Attributes.Colour&&c.enableVertexAttribArray(d.Attributes.Colour),-1!==d.Attributes.UV&&c.enableVertexAttribArray(d.Attributes.UV),1!==b.RenderMaterial.Alpha&&(c.enable(c.BLEND),c.disable(c.DEPTH_TEST),c.blendFunc(c.SRC_ALPHA,c.ONE)),this.BindAttributes(b.Mesh,b.RenderMaterial,b.RenderMaterial.Shader.Attributes),this.SetObjectUniforms(b.RenderMaterial,b.RenderMaterial.Shader.Uniforms),this.Draw(b.Mesh.VertexCount),1!==b.RenderMaterial.Alpha&&(c.enable(c.DEPTH_TEST),
c.disable(c.BLEND)),c.disableVertexAttribArray(d.Attributes.Position),-1!==d.Attributes.Normal&&c.disableVertexAttribArray(d.Attributes.Normal),-1!==d.Attributes.Colour&&c.disableVertexAttribArray(d.Attributes.Colour),-1!==d.Attributes.UV&&c.disableVertexAttribArray(d.Attributes.UV),c.useProgram(null));a.PopMatrix()}},BindAttributes:{value:function(a,b,f){c.bindBuffer(c.ARRAY_BUFFER,a.PositionBuffer);c.vertexAttribPointer(f.Position,3,c.FLOAT,!1,0,0);-1!==f.UV&&(a.UVBuffer?(c.bindBuffer(c.ARRAY_BUFFER,
a.UVBuffer),c.vertexAttribPointer(f.UV,2,c.FLOAT,!1,0,0)):c.disableVertexAttribArray(f.UV));-1!==f.Colour&&(a.ColourBuffer?(c.bindBuffer(c.ARRAY_BUFFER,a.ColourBuffer),c.vertexAttribPointer(f.Colour,3,c.FLOAT,!1,0,0)):c.disableVertexAttribArray(f.Colour));-1!==f.Normal&&(a.NormalBuffer?(c.bindBuffer(c.ARRAY_BUFFER,a.NormalBuffer),c.vertexAttribPointer(f.Normal,3,c.FLOAT,!1,0,0)):c.disableVertexAttribArray(f.Normal));c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a.IndexBuffer)}},SetObjectUniforms:{value:function(b,
e){c.uniformMatrix4fv(e.Matrix.ModelView,!1,a.PeekMatrix());c.uniformMatrix3fv(e.Matrix.Normal,!1,this.CalculateNormalMatrix());c.uniform3fv(e.Material.Ambient,b.Ambient);c.uniform3fv(e.Material.Diffuse,b.Diffuse);c.uniform3fv(e.Material.Specular,b.Specular);c.uniform1f(e.Material.Shininess,b.Shininess);c.uniform1f(e.Material.Alpha,b.Alpha);b.Image?(c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,b.Image),c.uniform1i(e.Material.HasImageMap,!0),c.uniform1i(e.Sampler.Image,0)):(c.bindTexture(c.TEXTURE_2D,
null),c.uniform1i(e.Material.HasImageMap,!1));b.Bump?(c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,b.Bump),c.uniform1i(e.Material.HasBumpMap,!0),c.uniform1i(e.Sampler.Bump,1)):(c.bindTexture(c.TEXTURE_2D,null),c.uniform1i(e.Material.HasBumpMap,!1))}},SetGlobalUniforms:{value:function(){for(var d=t.length;0<=--d;){var e=0;c.useProgram(t[d].Program);for(var f=t[d].Uniforms.Light,h=m.length;0<=--h;){var g=m[d];if(g)switch(g.Type){case "AMBIENTLIGHT":c.uniform3fv(f.Ambient.Colour,g.Colour);
c.uniform1f(f.Ambient.Intensity,g.Intensity);break;case "DIRECTIONALLIGHT":c.uniform3fv(f.Directional.Colour,g.Colour);c.uniform1f(f.Directional.Intensity,g.Intensity);c.uniform3fv(f.Directional.Direction,g.Direction);break;case "POINTLIGHT":a.PushMatrix();a.Transform(g.Transform);var k=a.PopMatrix();c.uniform3fv(f.Point[e].Colour,g.Colour);c.uniform1f(f.Point[e].Intensity,g.Intensity);c.uniform3f(f.Point[e].Position,k.M41,k.M42,k.M43);c.uniform1f(f.Point[e].Radius,g.Radius);c.uniform1f(f.Point[e].Angle,
g.Angle);e++}}c.uniform1i(f.PointCount,e);c.uniformMatrix4fv(t[d].Uniforms.Matrix.Projection,!1,b.GetViewer())}c.useProgram(null)}},CalculateNormalMatrix:{value:function(){var b=a.PeekMatrix();FWGE.Game.Maths.Matrix4.Inverse(b);return FWGE.Game.Maths.Matrix3.Create(b.M11,b.M21,b.M31,b.M12,b.M22,b.M32,b.M13,b.M23,b.M33)}},Draw:{value:function(a){console.log(a);c.drawElements(c.TRIANGLES,a,c.UNSIGNED_SHORT,0)}},FinalDraw:{value:function(){}}});b.ProjectionUpdate()}var c=void 0;Object.defineProperties(Math,
{cot:{value:function(a){return 1/Math.tan(a)}},radian:{value:function(a){return Math.PI/180*a}},clamp:{value:function(a,b,c){return Math.max(Math.min(a,c),main)}}});var L=new function(){var a=0;this.next=function(){return a++}},n=[];Object.defineProperties(p.prototype,{constructor:{value:p},Clone:{value:function(a){a=a instanceof p?a:this;for(var b=new p({name:a.Name,material:a.Material,mesh:a.Mesh,transform:new u({position:a.Transform.Position,rotation:a.Transform.Rotation,scale:a.Transform.Scale,
shear:a.Transform.Shear}),physics:a.Physics,animation:a.Animation}),c=0;c<a.Children.length;++c)b.Children.push(a.Children[c].Clone());return b}},Destroy:{value:function(a){var b=this;"number"!==typeof a&&(a=0);setTimeout(function(){for(var a=n.length;0<=--a;)if(n[a]===b){n.splice(a,1);break}b.End()},1E3*a)}},ObjectUpdate:{value:function(){this.Update();this.Transform.TransformUpdate();this.PhysicsItem&&this.PhysicsItem.PhysicsUpdate();this.Animation&&this.Animation.AnimationUpdate();this.LightItem&&
this.LightItem.LightUpdate();this.ParticleSystem&&this.ParticleSystem.ParticleSystemUpdate()}}});Object.defineProperties(u.prototype,{constructor:{value:u},TransformUpdate:{value:function(){}}});var m=Array(12),t=[],ea=[],fa=[];Object.defineProperties(x.prototype,{constructor:{value:x},SetTextures:{value:function(a){function b(a,b){b=new Image;b.onload=function(){};b.src=a}a||(a={});"string"===typeof a.image&&b(a.image,this.ImageMap);"string"===typeof a.bump&&b(a.bump,this.BumpMap);"string"===typeof a.specular&&
b(a.specular,this.Specular)}}});window.FWGE=new function(){Object.defineProperties(this,{Game:{value:new F},Physics:{value:new X},Render:{value:new ba},Init:{value:function(a){a||(a={});a.clear&&a.clear instanceof Float32Array&&4!==a.clear.length||(a.clear=[0,0,0,0]);c=canvas.getContext("webgl")||canvas.getContext("experimental-webgl");if(!c)throw"Webgl context could not be initialized.";c.clearColor(a.clear[0]||0,a.clear[1]||0,a.clear[2]||0,a.clear[3]||0);this.Game.Init();this.Physics.Init();this.Render.Init()}}})}})();